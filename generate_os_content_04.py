#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
OS Content Generator 04
Updates os.json with high-quality Korean content for:
- 05_ë™ê¸°ë¹„ë™ê¸°: sync-async, blocking-nonblocking, sync-blocking-matrix
- 05_ë™ê¸°í™”: critical-section, mutex-semaphore, deadlock-solution
"""

import json
import os

def create_sync_async_content():
    """ë™ê¸° vs ë¹„ë™ê¸° - ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ëŠ”ê°€?"""
    return {
        "id": "05_ë™ê¸°ë¹„ë™ê¸°/sync-async",
        "title": "ë™ê¸° vs ë¹„ë™ê¸°",
        "category": "os",
        "subCategory": "05_ë™ê¸°ë¹„ë™ê¸°",
        "language": "Java",
        "description": "ë™ê¸°ì™€ ë¹„ë™ê¸°ì˜ í•µì‹¬ ì°¨ì´ì ì„ ì»¤í”¼ìˆ ë¹„ìœ ë¡œ ì´í•´í•˜ê³ , ì‹¤ë¬´ì—ì„œì˜ í™œìš©ë²•ì„ í•™ìŠµí•©ë‹ˆë‹¤.",
        "isPlaceholder": False,
        "sections": [
            {
                "type": "concept",
                "title": "ë™ê¸° vs ë¹„ë™ê¸°: ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ëŠ”ê°€?",
                "content": "## ì»¤í”¼ìˆ ì£¼ë¬¸ìœ¼ë¡œ ì´í•´í•˜ëŠ” ë™ê¸°/ë¹„ë™ê¸°\n\n### ë™ê¸°(Synchronous) - ì¹´ìš´í„°ì—ì„œ ê¸°ë‹¤ë¦¬ê¸°\n```\n[ê³ ê°] --> [ì£¼ë¬¸] --> [ê¸°ë‹¤ë¦¼...] --> [ì»¤í”¼ ë°›ìŒ] --> [ìë¦¬ë¡œ ì´ë™]\n         |<-------- ì•„ë¬´ê²ƒë„ ëª»í•¨ -------->|\n```\n- ì»¤í”¼ê°€ ë‚˜ì˜¬ ë•Œê¹Œì§€ ì¹´ìš´í„° ì•ì—ì„œ ëŒ€ê¸°\n- ê²°ê³¼(ì»¤í”¼)ë¥¼ ë°›ì„ ë•Œê¹Œì§€ ë‹¤ë¥¸ ì¼ì„ í•˜ì§€ ì•ŠìŒ\n- **í˜¸ì¶œìê°€ ê²°ê³¼ë¥¼ ì§ì ‘ ë°›ì•„ê°**\n\n### ë¹„ë™ê¸°(Asynchronous) - ì§„ë™ë²¨ ë°›ê³  ìë¦¬ë¡œ\n```\n[ê³ ê°] --> [ì£¼ë¬¸] --> [ì§„ë™ë²¨ ë°›ìŒ] --> [ìë¦¬ì—ì„œ ëŒ€ê¸°/ë‹¤ë¥¸ ì¼]\n                           |\n                    [ì§„ë™ë²¨ ìš¸ë¦¼] --> [ì»¤í”¼ ë°›ìœ¼ëŸ¬ ê°]\n```\n- ì§„ë™ë²¨ì„ ë°›ê³  ìë¦¬ì—ì„œ ë‹¤ë¥¸ ì¼ ê°€ëŠ¥\n- ì»¤í”¼ê°€ ì¤€ë¹„ë˜ë©´ ì•Œë¦¼(ì½œë°±)ì„ ë°›ìŒ\n- **ê²°ê³¼ëŠ” ë‚˜ì¤‘ì— ì½œë°±/ì•Œë¦¼ìœ¼ë¡œ ì „ë‹¬ë¨**\n\n### í•µì‹¬ ì°¨ì´ì \n| êµ¬ë¶„ | ë™ê¸° | ë¹„ë™ê¸° |\n|------|------|--------|\n| ê²°ê³¼ ìˆ˜ì‹  | ì§ì ‘ ëŒ€ê¸°í•˜ë©° ë°›ìŒ | ì½œë°±/ì•Œë¦¼ìœ¼ë¡œ ë°›ìŒ |\n| ì‹¤í–‰ ìˆœì„œ | ìˆœì°¨ì  ë³´ì¥ | ìˆœì„œ ë³´ì¥ ì•ˆë¨ |\n| ì½”ë“œ íë¦„ | ì§ê´€ì  | ì½œë°± ì§€ì˜¥ ê°€ëŠ¥ |\n| ìì› í™œìš© | ëŒ€ê¸° ì¤‘ ë‚­ë¹„ | íš¨ìœ¨ì  í™œìš© |"
            },
            {
                "type": "code",
                "title": "Java CompletableFutureë¡œ ë¹„ë™ê¸° ì²˜ë¦¬",
                "language": "java",
                "code": "import java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.ExecutionException;\n\npublic class SyncAsyncExample {\n    \n    // ë™ê¸° ë°©ì‹: ê²°ê³¼ë¥¼ ì§ì ‘ ê¸°ë‹¤ë¦¼\n    public static String syncOrderCoffee(String type) {\n        System.out.println(\"[ë™ê¸°] ì»¤í”¼ ì£¼ë¬¸: \" + type);\n        try {\n            Thread.sleep(3000); // ì»¤í”¼ ì œì¡° ì‹œê°„\n        } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n        }\n        return type + \" ì™„ì„±!\";\n    }\n    \n    // ë¹„ë™ê¸° ë°©ì‹: ì§„ë™ë²¨(Future) ë°›ê³  ë‚˜ì¤‘ì— ê²°ê³¼ ìˆ˜ì‹ \n    public static CompletableFuture<String> asyncOrderCoffee(String type) {\n        System.out.println(\"[ë¹„ë™ê¸°] ì»¤í”¼ ì£¼ë¬¸: \" + type);\n        return CompletableFuture.supplyAsync(() -> {\n            try {\n                Thread.sleep(3000); // ì»¤í”¼ ì œì¡° ì‹œê°„\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n            }\n            return type + \" ì™„ì„±!\";\n        });\n    }\n    \n    public static void main(String[] args) throws Exception {\n        // === ë™ê¸° ë°©ì‹ ===\n        long start = System.currentTimeMillis();\n        String coffee1 = syncOrderCoffee(\"ì•„ë©”ë¦¬ì¹´ë…¸\");\n        String coffee2 = syncOrderCoffee(\"ë¼ë–¼\");\n        System.out.println(coffee1 + \", \" + coffee2);\n        System.out.println(\"ë™ê¸° ì†Œìš”ì‹œê°„: \" + (System.currentTimeMillis() - start) + \"ms\");\n        // ê²°ê³¼: ì•½ 6000ms (ìˆœì°¨ ì‹¤í–‰)\n        \n        // === ë¹„ë™ê¸° ë°©ì‹ ===\n        start = System.currentTimeMillis();\n        CompletableFuture<String> future1 = asyncOrderCoffee(\"ì•„ë©”ë¦¬ì¹´ë…¸\");\n        CompletableFuture<String> future2 = asyncOrderCoffee(\"ë¼ë–¼\");\n        \n        // ì§„ë™ë²¨ ìš¸ë¦¬ë©´ ë°›ìœ¼ëŸ¬ ê° (ì½œë°±)\n        future1.thenAccept(result -> System.out.println(\"ì½œë°±: \" + result));\n        future2.thenAccept(result -> System.out.println(\"ì½œë°±: \" + result));\n        \n        // ë‘ ì‘ì—… ëª¨ë‘ ì™„ë£Œ ëŒ€ê¸°\n        CompletableFuture.allOf(future1, future2).join();\n        System.out.println(\"ë¹„ë™ê¸° ì†Œìš”ì‹œê°„: \" + (System.currentTimeMillis() - start) + \"ms\");\n        // ê²°ê³¼: ì•½ 3000ms (ë³‘ë ¬ ì‹¤í–‰)\n    }\n}"
            },
            {
                "type": "code",
                "title": "Node.js ë™ê¸°/ë¹„ë™ê¸° ë¹„êµ",
                "language": "javascript",
                "code": "const fs = require('fs');\nconst fsPromises = require('fs').promises;\n\n// === ë™ê¸° ë°©ì‹: íŒŒì¼ ì½ê¸° ì™„ë£Œê¹Œì§€ ë¸”ë¡œí‚¹ ===\nconsole.log('1. ë™ê¸° ì½ê¸° ì‹œì‘');\nconst dataSync = fs.readFileSync('file.txt', 'utf8');\nconsole.log('2. ë™ê¸° ì½ê¸° ì™„ë£Œ:', dataSync);\nconsole.log('3. ë‹¤ìŒ ì‘ì—…'); // 2ë²ˆ ì´í›„ì—ë§Œ ì‹¤í–‰ë¨\n\n// ì‹¤í–‰ ìˆœì„œ: 1 -> 2 -> 3 (ë³´ì¥ë¨)\n\n// === ë¹„ë™ê¸° ë°©ì‹ (ì½œë°±): ì§„ë™ë²¨ íŒ¨í„´ ===\nconsole.log('1. ë¹„ë™ê¸° ì½ê¸° ì‹œì‘');\nfs.readFile('file.txt', 'utf8', (err, data) => {\n    // ì´ ì½œë°±ì€ íŒŒì¼ ì½ê¸°ê°€ ì™„ë£Œë˜ë©´ í˜¸ì¶œë¨ (ì§„ë™ë²¨ ìš¸ë¦¼)\n    console.log('3. ë¹„ë™ê¸° ì½ê¸° ì™„ë£Œ:', data);\n});\nconsole.log('2. ë‹¤ìŒ ì‘ì—…'); // ë°”ë¡œ ì‹¤í–‰ë¨ (ê¸°ë‹¤ë¦¬ì§€ ì•ŠìŒ)\n\n// ì‹¤í–‰ ìˆœì„œ: 1 -> 2 -> 3 (ìˆœì„œ ë³´ì¥ ì•ˆë¨!)\n\n// === ë¹„ë™ê¸° ë°©ì‹ (Promise + async/await) ===\nasync function readFileAsync() {\n    console.log('1. async ì½ê¸° ì‹œì‘');\n    \n    // awaitë¡œ ë¹„ë™ê¸°ë¥¼ ë™ê¸°ì²˜ëŸ¼ ì‘ì„± (ê°€ë…ì„± í–¥ìƒ)\n    const data = await fsPromises.readFile('file.txt', 'utf8');\n    console.log('2. async ì½ê¸° ì™„ë£Œ:', data);\n    \n    console.log('3. ë‹¤ìŒ ì‘ì—…');\n}\n\n// === ì—¬ëŸ¬ ë¹„ë™ê¸° ì‘ì—… ë³‘ë ¬ ì²˜ë¦¬ ===\nasync function parallelRead() {\n    console.log('ë³‘ë ¬ ì½ê¸° ì‹œì‘');\n    const startTime = Date.now();\n    \n    // Promise.all: ëª¨ë“  ì§„ë™ë²¨ì´ ìš¸ë¦´ ë•Œê¹Œì§€ ëŒ€ê¸°\n    const [file1, file2, file3] = await Promise.all([\n        fsPromises.readFile('file1.txt', 'utf8'),\n        fsPromises.readFile('file2.txt', 'utf8'),\n        fsPromises.readFile('file3.txt', 'utf8')\n    ]);\n    \n    console.log(`ë³‘ë ¬ ì™„ë£Œ: ${Date.now() - startTime}ms`);\n    // 3ê°œ íŒŒì¼ì„ ë™ì‹œì— ì½ì–´ì„œ ê°€ì¥ ëŠë¦° íŒŒì¼ ì‹œê°„ë§Œ ì†Œìš”\n}"
            },
            {
                "type": "tip",
                "title": "ë©´ì ‘ ëŒ€ë¹„ í•µì‹¬ ì •ë¦¬",
                "content": "## ë™ê¸° vs ë¹„ë™ê¸° í•µì‹¬ ìš”ì•½\n\n### ë©´ì ‘ ë‹µë³€ í…œí”Œë¦¿\n```\n\"ë™ê¸°ëŠ” ì‘ì—…ì˜ ê²°ê³¼ë¥¼ ì§ì ‘ ê¸°ë‹¤ë¦¬ëŠ” ë°©ì‹ì´ê³ ,\në¹„ë™ê¸°ëŠ” ì‘ì—…ì„ ë§¡ê²¨ë‘ê³  ê²°ê³¼ëŠ” ë‚˜ì¤‘ì— ì½œë°±ìœ¼ë¡œ ë°›ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\nì»¤í”¼ìˆì— ë¹„ìœ í•˜ë©´, ë™ê¸°ëŠ” ì¹´ìš´í„°ì—ì„œ ì»¤í”¼ê°€ ë‚˜ì˜¬ ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ëŠ” ê²ƒì´ê³ ,\në¹„ë™ê¸°ëŠ” ì§„ë™ë²¨ì„ ë°›ê³  ìë¦¬ì—ì„œ ë‹¤ë¥¸ ì¼ì„ í•˜ë‹¤ê°€ ë²¨ì´ ìš¸ë¦¬ë©´ ë°›ìœ¼ëŸ¬ ê°€ëŠ” ê²ƒì…ë‹ˆë‹¤.\"\n```\n\n### ì‹¤ë¬´ ì„ íƒ ê¸°ì¤€\n| ìƒí™© | ì¶”ì²œ ë°©ì‹ | ì´ìœ  |\n|------|----------|------|\n| ìˆœì„œ ë³´ì¥ í•„ìš” | ë™ê¸° | ì‹¤í–‰ ìˆœì„œ ì˜ˆì¸¡ ê°€ëŠ¥ |\n| I/O ì‘ì—… ë§ìŒ | ë¹„ë™ê¸° | CPU ëŒ€ê¸° ì‹œê°„ í™œìš© |\n| ë…ë¦½ì  ì‘ì—… ì—¬ëŸ¬ ê°œ | ë¹„ë™ê¸° ë³‘ë ¬ | ì´ ì†Œìš” ì‹œê°„ ë‹¨ì¶• |\n| ê°„ë‹¨í•œ ìŠ¤í¬ë¦½íŠ¸ | ë™ê¸° | ì½”ë“œ ë³µì¡ë„ ë‚®ìŒ |\n\n### ìì£¼ ë‚˜ì˜¤ëŠ” ë©´ì ‘ ì§ˆë¬¸\n1. **Q: ë™ê¸°ì™€ ë¹„ë™ê¸°ì˜ ì°¨ì´ì ì€?**\n   - A: ê²°ê³¼ë¥¼ ì§ì ‘ ê¸°ë‹¤ë¦¬ëŠëƒ(ë™ê¸°), ì½œë°±ìœ¼ë¡œ ë°›ëŠëƒ(ë¹„ë™ê¸°)ì˜ ì°¨ì´\n\n2. **Q: ë¹„ë™ê¸° ì²˜ë¦¬ì˜ ì¥ë‹¨ì ì€?**\n   - ì¥ì : ìì› íš¨ìœ¨ì  í™œìš©, ì‘ë‹µì„± í–¥ìƒ\n   - ë‹¨ì : ì½”ë“œ ë³µì¡ë„ ì¦ê°€, ë””ë²„ê¹… ì–´ë ¤ì›€\n\n3. **Q: async/awaitëŠ” ë™ê¸°ì¸ê°€ìš” ë¹„ë™ê¸°ì¸ê°€ìš”?**\n   - A: ë¹„ë™ê¸°ì…ë‹ˆë‹¤. ë™ê¸°ì²˜ëŸ¼ ë³´ì´ê²Œ ì‘ì„±í•˜ëŠ” ë¬¸ë²•ì  ì„¤íƒ•(Syntactic Sugar)ì¼ ë¿"
            }
        ]
    }

def create_blocking_nonblocking_content():
    """ë¸”ë¡œí‚¹ vs ë…¼ë¸”ë¡œí‚¹ - ì œì–´ê¶Œ ë°˜í™˜"""
    return {
        "id": "05_ë™ê¸°ë¹„ë™ê¸°/blocking-nonblocking",
        "title": "ë¸”ë¡œí‚¹ vs ë…¼ë¸”ë¡œí‚¹",
        "category": "os",
        "subCategory": "05_ë™ê¸°ë¹„ë™ê¸°",
        "language": "Java",
        "description": "ë¸”ë¡œí‚¹ê³¼ ë…¼ë¸”ë¡œí‚¹ì˜ ì œì–´ê¶Œ ê°œë…ì„ ì¹´í˜ ì•Œë°”ìƒ ë¹„ìœ ë¡œ ì´í•´í•˜ê³ , I/O ëª¨ë¸ì—ì„œì˜ ì°¨ì´ë¥¼ í•™ìŠµí•©ë‹ˆë‹¤.",
        "isPlaceholder": False,
        "sections": [
            {
                "type": "concept",
                "title": "ë¸”ë¡œí‚¹ vs ë…¼ë¸”ë¡œí‚¹: ì œì–´ê¶Œì„ ëŒë ¤ì£¼ëŠ”ê°€?",
                "content": "## ì¹´í˜ ì•Œë°”ìƒìœ¼ë¡œ ì´í•´í•˜ëŠ” ë¸”ë¡œí‚¹/ë…¼ë¸”ë¡œí‚¹\n\n### ë¸”ë¡œí‚¹(Blocking) - ë©ë•Œë¦¬ë©° ê¸°ë‹¤ë¦¬ê¸°\n```\n[ì•Œë°”ìƒ] --> [ì—ìŠ¤í”„ë ˆì†Œ ì¶”ì¶œ ì‹œì‘] --> [ë©ë•Œë¦¼...] --> [ì¶”ì¶œ ì™„ë£Œ]\n                |<-------- ì•„ë¬´ê²ƒë„ ì•ˆí•¨ -------->|\n                          (ì œì–´ê¶Œ ì—†ìŒ)\n```\n- ì—ìŠ¤í”„ë ˆì†Œ ë¨¸ì‹  ì•ì—ì„œ ì¶”ì¶œë  ë•Œê¹Œì§€ ì„œìˆìŒ\n- ì¶”ì¶œ ì™„ë£Œë  ë•Œê¹Œì§€ **ë‹¤ë¥¸ ì¼ì„ í•  ìˆ˜ ì—†ìŒ**\n- **ì œì–´ê¶Œì´ í˜¸ì¶œëœ í•¨ìˆ˜ì—ê²Œ ë„˜ì–´ê°**\n\n### ë…¼ë¸”ë¡œí‚¹(Non-Blocking) - ë‹¤ë¥¸ ì¼ í•˜ë©´ì„œ ê¸°ë‹¤ë¦¬ê¸°\n```\n[ì•Œë°”ìƒ] --> [ì—ìŠ¤í”„ë ˆì†Œ ì¶”ì¶œ ì‹œì‘] --> [ì»µ ì¤€ë¹„] --> [ì‹œëŸ½ ì¶”ê°€] --> [ì¶”ì¶œ í™•ì¸]\n                |                         |\n                +---- ì œì–´ê¶Œ ì¦‰ì‹œ ë°˜í™˜ ----+\n                      (ë‹¤ë¥¸ ì¼ ê°€ëŠ¥)\n```\n- ì¶”ì¶œ ë²„íŠ¼ ëˆ„ë¥´ê³  ë°”ë¡œ ë‹¤ë¥¸ ì¤€ë¹„ ì‘ì—…\n- ì¤‘ê°„ì¤‘ê°„ ì¶”ì¶œ ì™„ë£Œ ì—¬ë¶€ í™•ì¸(polling)\n- **ì œì–´ê¶Œì´ ì¦‰ì‹œ í˜¸ì¶œìì—ê²Œ ë°˜í™˜ë¨**\n\n### í•µì‹¬ ì°¨ì´ì : ì œì–´ê¶Œ(Control)\n| êµ¬ë¶„ | ë¸”ë¡œí‚¹ | ë…¼ë¸”ë¡œí‚¹ |\n|------|--------|----------|\n| ì œì–´ê¶Œ | ì‘ì—… ì™„ë£Œê¹Œì§€ ë„˜ê²¨ì¤Œ | ì¦‰ì‹œ ë°˜í™˜ë°›ìŒ |\n| ëŒ€ê¸° ë°©ì‹ | ì•„ë¬´ê²ƒë„ ì•ˆí•¨ | ë‹¤ë¥¸ ì¼ ê°€ëŠ¥ |\n| í•¨ìˆ˜ ë°˜í™˜ | ê²°ê³¼ì™€ í•¨ê»˜ ë°˜í™˜ | ì¦‰ì‹œ ë°˜í™˜ (ê²°ê³¼ ì—†ì„ ìˆ˜ ìˆìŒ) |\n| CPU ì‚¬ìš© | ëŒ€ê¸° ì¤‘ ìœ íœ´ | ë‹¤ë¥¸ ì‘ì—…ì— í™œìš© |\n\n### ë™ê¸°/ë¹„ë™ê¸°ì™€ì˜ ì°¨ì´\n- **ë™ê¸°/ë¹„ë™ê¸°**: ê²°ê³¼ë¥¼ **ì–´ë–»ê²Œ** ë°›ì„ ê²ƒì¸ê°€? (ì§ì ‘ vs ì½œë°±)\n- **ë¸”ë¡œí‚¹/ë…¼ë¸”ë¡œí‚¹**: ê²°ê³¼ë¥¼ **ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ** ë­˜ í•  ê²ƒì¸ê°€? (ëŒ€ê¸° vs ë‹¤ë¥¸ì¼)"
            },
            {
                "type": "code",
                "title": "Java NIO ë¸”ë¡œí‚¹ vs ë…¼ë¸”ë¡œí‚¹ ì†Œì¼“",
                "language": "java",
                "code": "import java.io.*;\nimport java.net.*;\nimport java.nio.*;\nimport java.nio.channels.*;\n\npublic class BlockingNonBlockingIO {\n    \n    // === ë¸”ë¡œí‚¹ I/O: ë°ì´í„° ì˜¬ ë•Œê¹Œì§€ ë©ˆì¶¤ ===\n    public static void blockingServer() throws IOException {\n        ServerSocket serverSocket = new ServerSocket(8080);\n        System.out.println(\"[ë¸”ë¡œí‚¹] ì„œë²„ ì‹œì‘\");\n        \n        while (true) {\n            // accept()ëŠ” í´ë¼ì´ì–¸íŠ¸ ì—°ê²°ê¹Œì§€ ë¸”ë¡œí‚¹ë¨\n            // ì´ ì¤„ì—ì„œ ë©ˆì¶°ìˆìŒ (ë©ë•Œë¦¼ ìƒíƒœ)\n            Socket clientSocket = serverSocket.accept();\n            System.out.println(\"í´ë¼ì´ì–¸íŠ¸ ì—°ê²°ë¨\");\n            \n            BufferedReader reader = new BufferedReader(\n                new InputStreamReader(clientSocket.getInputStream()));\n            \n            // read()ë„ ë°ì´í„° ì˜¬ ë•Œê¹Œì§€ ë¸”ë¡œí‚¹ë¨\n            String line = reader.readLine(); // ì—¬ê¸°ì„œë„ ë©ë•Œë¦¼\n            System.out.println(\"ë°›ì€ ë°ì´í„°: \" + line);\n        }\n        // ë¬¸ì œ: í´ë¼ì´ì–¸íŠ¸ 1000ëª…ì´ë©´ ìŠ¤ë ˆë“œ 1000ê°œ í•„ìš”\n    }\n    \n    // === ë…¼ë¸”ë¡œí‚¹ I/O: ì¦‰ì‹œ ë°˜í™˜, ë‚˜ì¤‘ì— í™•ì¸ ===\n    public static void nonBlockingServer() throws IOException {\n        ServerSocketChannel serverChannel = ServerSocketChannel.open();\n        serverChannel.bind(new InetSocketAddress(8080));\n        serverChannel.configureBlocking(false); // ë…¼ë¸”ë¡œí‚¹ ëª¨ë“œ!\n        \n        Selector selector = Selector.open();\n        serverChannel.register(selector, SelectionKey.OP_ACCEPT);\n        \n        System.out.println(\"[ë…¼ë¸”ë¡œí‚¹] ì„œë²„ ì‹œì‘\");\n        ByteBuffer buffer = ByteBuffer.allocate(1024);\n        \n        while (true) {\n            // select()ëŠ” ì´ë²¤íŠ¸ê°€ ìˆì„ ë•Œë§Œ ë°˜í™˜\n            // ì´ë²¤íŠ¸ ì—†ìœ¼ë©´ ë‹¤ë¥¸ ì¼ ê°€ëŠ¥!\n            selector.select();\n            \n            for (SelectionKey key : selector.selectedKeys()) {\n                if (key.isAcceptable()) {\n                    // ì—°ê²° ìˆ˜ë½ (ë…¼ë¸”ë¡œí‚¹: ì¦‰ì‹œ ë°˜í™˜)\n                    SocketChannel clientChannel = serverChannel.accept();\n                    if (clientChannel != null) {\n                        clientChannel.configureBlocking(false);\n                        clientChannel.register(selector, SelectionKey.OP_READ);\n                        System.out.println(\"í´ë¼ì´ì–¸íŠ¸ ì—°ê²°ë¨\");\n                    }\n                } else if (key.isReadable()) {\n                    // ë°ì´í„° ì½ê¸° (ë…¼ë¸”ë¡œí‚¹: ë°ì´í„° ì—†ìœ¼ë©´ 0 ë°˜í™˜)\n                    SocketChannel clientChannel = (SocketChannel) key.channel();\n                    buffer.clear();\n                    int bytesRead = clientChannel.read(buffer); // ì¦‰ì‹œ ë°˜í™˜!\n                    if (bytesRead > 0) {\n                        buffer.flip();\n                        System.out.println(\"ë°›ì€ ë°ì´í„°: \" + new String(buffer.array(), 0, bytesRead));\n                    }\n                }\n            }\n            selector.selectedKeys().clear();\n            \n            // ì—¬ê¸°ì„œ ë‹¤ë¥¸ ì‘ì—… ê°€ëŠ¥! (ë…¼ë¸”ë¡œí‚¹ì´ë‹ˆê¹Œ)\n            doOtherWork();\n        }\n    }\n    \n    private static void doOtherWork() {\n        // ì»µ ì¤€ë¹„, ì‹œëŸ½ ì¶”ê°€ ë“± ë‹¤ë¥¸ ì‘ì—…\n    }\n}"
            },
            {
                "type": "code",
                "title": "Node.js ë…¼ë¸”ë¡œí‚¹ I/O í™œìš©",
                "language": "javascript",
                "code": "const fs = require('fs');\nconst net = require('net');\n\n// === Node.jsëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë…¼ë¸”ë¡œí‚¹ I/O ===\n\n// 1. íŒŒì¼ ì½ê¸° - ë…¼ë¸”ë¡œí‚¹\nconsole.log('1. íŒŒì¼ ì½ê¸° ì‹œì‘');\nfs.readFile('large-file.txt', 'utf8', (err, data) => {\n    // íŒŒì¼ ì½ê¸° ì™„ë£Œë˜ë©´ ì½œë°± ì‹¤í–‰\n    console.log('3. íŒŒì¼ ì½ê¸° ì™„ë£Œ');\n});\nconsole.log('2. ë‹¤ë¥¸ ì‘ì—… ìˆ˜í–‰'); // ì œì–´ê¶Œ ì¦‰ì‹œ ë°˜í™˜ë˜ì–´ ë°”ë¡œ ì‹¤í–‰!\n\n// ì‹¤í–‰ ìˆœì„œ: 1 -> 2 -> 3\n\n// 2. TCP ì„œë²„ - ë…¼ë¸”ë¡œí‚¹ ì†Œì¼“\nconst server = net.createServer((socket) => {\n    console.log('í´ë¼ì´ì–¸íŠ¸ ì—°ê²°ë¨');\n    \n    // data ì´ë²¤íŠ¸: ë°ì´í„°ê°€ ë„ì°©í•˜ë©´ í˜¸ì¶œ (ë…¼ë¸”ë¡œí‚¹)\n    socket.on('data', (data) => {\n        console.log('ë°›ì€ ë°ì´í„°:', data.toString());\n        socket.write('ì‘ë‹µ: ' + data.toString());\n    });\n    \n    socket.on('end', () => {\n        console.log('í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ì¢…ë£Œ');\n    });\n});\n\nserver.listen(8080, () => {\n    console.log('ì„œë²„ ì‹œì‘ (ë…¼ë¸”ë¡œí‚¹ ëª¨ë“œ)');\n});\n\n// 3. ë…¼ë¸”ë¡œí‚¹ HTTP ìš”ì²­ ì—¬ëŸ¬ ê°œ ë™ì‹œ ì²˜ë¦¬\nconst https = require('https');\n\nfunction fetchUrl(url) {\n    return new Promise((resolve, reject) => {\n        // https.getì€ ë…¼ë¸”ë¡œí‚¹ - ì¦‰ì‹œ ë°˜í™˜\n        https.get(url, (res) => {\n            let data = '';\n            res.on('data', chunk => data += chunk);\n            res.on('end', () => resolve(data));\n        }).on('error', reject);\n    });\n}\n\nasync function fetchMultiple() {\n    const startTime = Date.now();\n    \n    // ë…¼ë¸”ë¡œí‚¹ì´ë¼ ë™ì‹œì— 3ê°œ ìš”ì²­ ê°€ëŠ¥\n    const results = await Promise.all([\n        fetchUrl('https://api1.example.com'),\n        fetchUrl('https://api2.example.com'),\n        fetchUrl('https://api3.example.com')\n    ]);\n    \n    console.log(`3ê°œ API í˜¸ì¶œ ì™„ë£Œ: ${Date.now() - startTime}ms`);\n    // ë¸”ë¡œí‚¹ì´ì—ˆë‹¤ë©´ ìˆœì°¨ ì‹¤í–‰ìœ¼ë¡œ 3ë°° ì‹œê°„ ì†Œìš”\n}\n\n// 4. ì´ë²¤íŠ¸ ë£¨í”„ê°€ ë…¼ë¸”ë¡œí‚¹ì„ ê°€ëŠ¥í•˜ê²Œ í•¨\n/*\n  Node.js ì´ë²¤íŠ¸ ë£¨í”„:\n  \n  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n  â”‚         timers            â”‚  <-- setTimeout, setInterval\n  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n  â”‚     pending callbacks     â”‚  <-- I/O ì½œë°±\n  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n  â”‚       idle, prepare       â”‚\n  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n  â”‚          poll             â”‚  <-- ìƒˆ I/O ì´ë²¤íŠ¸ ëŒ€ê¸°\n  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n  â”‚          check            â”‚  <-- setImmediate\n  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n  â”‚     close callbacks       â”‚  <-- socket.close()\n  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n*/"
            },
            {
                "type": "tip",
                "title": "ë©´ì ‘ ëŒ€ë¹„ í•µì‹¬ ì •ë¦¬",
                "content": "## ë¸”ë¡œí‚¹ vs ë…¼ë¸”ë¡œí‚¹ í•µì‹¬ ìš”ì•½\n\n### ë©´ì ‘ ë‹µë³€ í…œí”Œë¦¿\n```\n\"ë¸”ë¡œí‚¹ê³¼ ë…¼ë¸”ë¡œí‚¹ì€ ì œì–´ê¶Œì˜ ê´€ì ì—ì„œ êµ¬ë¶„í•©ë‹ˆë‹¤.\n\në¸”ë¡œí‚¹ì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ì œì–´ê¶Œì´ ë„˜ì–´ê°€ì„œ\ní˜¸ì¶œìëŠ” ì•„ë¬´ê²ƒë„ í•  ìˆ˜ ì—†ì´ ëŒ€ê¸°í•©ë‹ˆë‹¤.\n\në…¼ë¸”ë¡œí‚¹ì€ í•¨ìˆ˜ í˜¸ì¶œ í›„ ì¦‰ì‹œ ì œì–´ê¶Œì´ ë°˜í™˜ë˜ì–´\ní˜¸ì¶œìê°€ ë‹¤ë¥¸ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì¹´í˜ ì•Œë°”ìƒì— ë¹„ìœ í•˜ë©´, ë¸”ë¡œí‚¹ì€ ì—ìŠ¤í”„ë ˆì†Œ ì¶”ì¶œ ì¤‘ ë©ë•Œë¦¬ëŠ” ê²ƒì´ê³ ,\në…¼ë¸”ë¡œí‚¹ì€ ì¶”ì¶œ ë²„íŠ¼ ëˆ„ë¥´ê³  ë°”ë¡œ ì»µ ì¤€ë¹„í•˜ëŸ¬ ê°€ëŠ” ê²ƒì…ë‹ˆë‹¤.\"\n```\n\n### ë¸”ë¡œí‚¹ vs ë…¼ë¸”ë¡œí‚¹ ë¹„êµí‘œ\n| êµ¬ë¶„ | ë¸”ë¡œí‚¹ | ë…¼ë¸”ë¡œí‚¹ |\n|------|--------|----------|\n| ì œì–´ê¶Œ | ì™„ë£Œê¹Œì§€ ëŒ€ê¸° | ì¦‰ì‹œ ë°˜í™˜ |\n| ì½”ë“œ ë³µì¡ë„ | ë‚®ìŒ | ë†’ìŒ |\n| ìŠ¤ë ˆë“œ íš¨ìœ¨ | ë‚®ìŒ | ë†’ìŒ |\n| ëŒ€í‘œ ì˜ˆì‹œ | JDBC, ì¼ë°˜ ì†Œì¼“ | NIO, Node.js |\n\n### ìì£¼ ë‚˜ì˜¤ëŠ” ë©´ì ‘ ì§ˆë¬¸\n1. **Q: ë™ê¸°ì™€ ë¸”ë¡œí‚¹ì˜ ì°¨ì´ì ì€?**\n   - A: ë™ê¸°ëŠ” ê²°ê³¼ë¥¼ ì§ì ‘ ë°›ìŒ, ë¸”ë¡œí‚¹ì€ ì œì–´ê¶Œì´ ì—†ìŒ\n   - ë™ê¸°-ë…¼ë¸”ë¡œí‚¹ ì¡°í•©ë„ ê°€ëŠ¥ (ê²°ê³¼ ì§ì ‘ ë°›ì§€ë§Œ ì œì–´ê¶Œì€ ìˆìŒ)\n\n2. **Q: Node.jsê°€ ë¹ ë¥¸ ì´ìœ ëŠ”?**\n   - A: ë…¼ë¸”ë¡œí‚¹ I/O + ì´ë²¤íŠ¸ ë£¨í”„ë¡œ ë‹¨ì¼ ìŠ¤ë ˆë“œê°€ ë§ì€ ì—°ê²° ì²˜ë¦¬\n\n3. **Q: ë¸”ë¡œí‚¹ I/Oì˜ ë‹¨ì ì€?**\n   - A: ë™ì‹œ ì—°ê²°ë‹¹ ìŠ¤ë ˆë“œ í•„ìš” -> ë©”ëª¨ë¦¬ ë‚­ë¹„, ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ ì˜¤ë²„í—¤ë“œ"
            }
        ]
    }

def create_sync_blocking_matrix_content():
    """ë™ê¸°/ë¹„ë™ê¸° x ë¸”ë¡œí‚¹/ë…¼ë¸”ë¡œí‚¹ ë§¤íŠ¸ë¦­ìŠ¤"""
    return {
        "id": "05_ë™ê¸°ë¹„ë™ê¸°/sync-blocking-matrix",
        "title": "ë™ê¸°/ë¹„ë™ê¸° x ë¸”ë¡œí‚¹/ë…¼ë¸”ë¡œí‚¹ ë§¤íŠ¸ë¦­ìŠ¤",
        "category": "os",
        "subCategory": "05_ë™ê¸°ë¹„ë™ê¸°",
        "language": "Java",
        "description": "4ê°€ì§€ ì¡°í•©(ë™ê¸°-ë¸”ë¡œí‚¹, ë™ê¸°-ë…¼ë¸”ë¡œí‚¹, ë¹„ë™ê¸°-ë¸”ë¡œí‚¹, ë¹„ë™ê¸°-ë…¼ë¸”ë¡œí‚¹)ì„ ì‹¤ë¬´ ì˜ˆì‹œì™€ í•¨ê»˜ ì™„ë²½í•˜ê²Œ ì´í•´í•©ë‹ˆë‹¤.",
        "isPlaceholder": False,
        "sections": [
            {
                "type": "concept",
                "title": "4ê°€ì§€ ì¡°í•© ì™„ë²½ ì´í•´",
                "content": "## ë™ê¸°/ë¹„ë™ê¸° x ë¸”ë¡œí‚¹/ë…¼ë¸”ë¡œí‚¹ ë§¤íŠ¸ë¦­ìŠ¤\n\n```\n                    â”‚     ë¸”ë¡œí‚¹          â”‚      ë…¼ë¸”ë¡œí‚¹\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n   ë™  ê¸°           â”‚  ì¹´ìš´í„°ì—ì„œ ë©ë•Œë¦¼   â”‚  ì¹´ìš´í„°ì—ì„œ í° ë³´ê¸°\n (ê²°ê³¼ ì§ì ‘ ë°›ìŒ)   â”‚  - JDBC ì¿¼ë¦¬        â”‚  - Polling ë°©ì‹\n                    â”‚  - ì¼ë°˜ HTTP ìš”ì²­   â”‚  - CompletableFuture.isDone()\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n   ë¹„ë™ê¸°           â”‚  ì§„ë™ë²¨+ë©ë•Œë¦¼      â”‚  ì§„ë™ë²¨+ìë¦¬ì„œ ì‘ì—…\n (ì½œë°±ìœ¼ë¡œ ë°›ìŒ)    â”‚  - select() í›„ ëŒ€ê¸° â”‚  - Node.js I/O\n                    â”‚  - Future.get()     â”‚  - Spring WebFlux\n```\n\n### 1. ë™ê¸° + ë¸”ë¡œí‚¹ (ê°€ì¥ í”í•¨)\n```\n[ë‚˜] --ìš”ì²­--> [ì‘ì—…] --ëŒ€ê¸°(ë©ë•Œë¦¼)--> [ê²°ê³¼] --ë°˜í™˜--> [ë‚˜]\n               |<-- ì œì–´ê¶Œ ì—†ìŒ, ê²°ê³¼ ì§ì ‘ ëŒ€ê¸° -->|\n```\n- ì˜ˆ: JDBC ì¿¼ë¦¬, ì¼ë°˜ HTTP ìš”ì²­\n- ì¹´ìš´í„°ì—ì„œ ì»¤í”¼ ë‚˜ì˜¬ ë•Œê¹Œì§€ ë©í•˜ë‹ˆ ì„œìˆê¸°\n\n### 2. ë™ê¸° + ë…¼ë¸”ë¡œí‚¹ (í´ë§)\n```\n[ë‚˜] --ìš”ì²­--> [ì‘ì—…]\n     <--ë°˜í™˜-- (ì•„ì§ ì•ˆë¨)\n[ë‚˜] --ëë‚˜?-> [ì‘ì—…]\n     <--ë°˜í™˜-- (ì•„ì§ ì•ˆë¨)\n[ë‚˜] --ëë‚˜?-> [ì‘ì—…]\n     <--ë°˜í™˜-- [ê²°ê³¼!]\n```\n- ì˜ˆ: Future.isDone() ì²´í¬, busy-wait\n- ì¹´ìš´í„°ì—ì„œ \"ëë‚˜ìš”?\" ê³„ì† ë¬¼ì–´ë³´ê¸°\n\n### 3. ë¹„ë™ê¸° + ë¸”ë¡œí‚¹ (ë“œë¬¾)\n```\n[ë‚˜] --ìš”ì²­--> [ì‘ì—…] --ì§„ë™ë²¨-->\n              <------- ëŒ€ê¸°(ë©ë•Œë¦¼) ------->\n                      [ë²¨ ìš¸ë¦¼!] --> [ê²°ê³¼]\n```\n- ì˜ˆ: select() ì‹œìŠ¤í…œ ì½œ\n- ì§„ë™ë²¨ ë°›ê³ ë„ ë©í•˜ë‹ˆ ë²¨ë§Œ ì³ë‹¤ë´„\n\n### 4. ë¹„ë™ê¸° + ë…¼ë¸”ë¡œí‚¹ (ê°€ì¥ íš¨ìœ¨ì )\n```\n[ë‚˜] --ìš”ì²­--> [ì‘ì—…] --ì§„ë™ë²¨-->\n[ë‚˜] --ë‹¤ë¥¸ì¼--> [ë‹¤ë¥¸ì¼] --> [ë‹¤ë¥¸ì¼]\n                      [ë²¨ ìš¸ë¦¼!] --> [ê²°ê³¼]\n```\n- ì˜ˆ: Node.js, Spring WebFlux, Netty\n- ì§„ë™ë²¨ ë°›ê³  ìë¦¬ì—ì„œ ë‹¤ë¥¸ ì¼ í•˜ê¸°"
            },
            {
                "type": "code",
                "title": "Javaë¡œ 4ê°€ì§€ ì¡°í•© êµ¬í˜„",
                "language": "java",
                "code": "import java.util.concurrent.*;\n\npublic class SyncAsyncBlockingMatrix {\n    \n    // ì»¤í”¼ ë§Œë“œëŠ” ì‘ì—… (3ì´ˆ ì†Œìš”)\n    private static String makeCoffee() {\n        try { Thread.sleep(3000); } \n        catch (InterruptedException e) { Thread.currentThread().interrupt(); }\n        return \"ì»¤í”¼ ì™„ì„±!\";\n    }\n    \n    // ============================================\n    // 1. ë™ê¸° + ë¸”ë¡œí‚¹: ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ì‹\n    // ============================================\n    public static void syncBlocking() {\n        System.out.println(\"[ë™ê¸°+ë¸”ë¡œí‚¹] ì£¼ë¬¸ ì‹œì‘\");\n        \n        // ê²°ê³¼ ì§ì ‘ ë°›ìŒ(ë™ê¸°) + ì™„ë£Œê¹Œì§€ ëŒ€ê¸°(ë¸”ë¡œí‚¹)\n        String coffee = makeCoffee();\n        \n        System.out.println(\"[ë™ê¸°+ë¸”ë¡œí‚¹] \" + coffee);\n        // íŠ¹ì§•: ì½”ë“œ ë‹¨ìˆœ, í•˜ì§€ë§Œ 3ì´ˆê°„ ì•„ë¬´ê²ƒë„ ëª»í•¨\n    }\n    \n    // ============================================\n    // 2. ë™ê¸° + ë…¼ë¸”ë¡œí‚¹: í´ë§ ë°©ì‹\n    // ============================================\n    public static void syncNonBlocking() throws Exception {\n        System.out.println(\"[ë™ê¸°+ë…¼ë¸”ë¡œí‚¹] ì£¼ë¬¸ ì‹œì‘\");\n        \n        ExecutorService executor = Executors.newSingleThreadExecutor();\n        Future<String> future = executor.submit(() -> makeCoffee());\n        \n        // ê²°ê³¼ ì§ì ‘ í™•ì¸(ë™ê¸°) + ì¦‰ì‹œ ë°˜í™˜(ë…¼ë¸”ë¡œí‚¹)\n        while (!future.isDone()) {\n            System.out.println(\"ì•„ì§ ì•ˆë¨... ë‹¤ë¥¸ ì¼ í•˜ëŠ” ì¤‘\");\n            Thread.sleep(500); // ë‹¤ë¥¸ ì‘ì—…\n        }\n        \n        String coffee = future.get(); // ì´ë¯¸ ì™„ë£Œë¨\n        System.out.println(\"[ë™ê¸°+ë…¼ë¸”ë¡œí‚¹] \" + coffee);\n        executor.shutdown();\n        // íŠ¹ì§•: í´ë§ ì˜¤ë²„í—¤ë“œ, í•˜ì§€ë§Œ ëŒ€ê¸° ì¤‘ ë‹¤ë¥¸ ì¼ ê°€ëŠ¥\n    }\n    \n    // ============================================\n    // 3. ë¹„ë™ê¸° + ë¸”ë¡œí‚¹: í”í•˜ì§€ ì•Šì€ ì¡°í•©\n    // ============================================\n    public static void asyncBlocking() throws Exception {\n        System.out.println(\"[ë¹„ë™ê¸°+ë¸”ë¡œí‚¹] ì£¼ë¬¸ ì‹œì‘\");\n        \n        CompletableFuture<String> future = CompletableFuture\n            .supplyAsync(() -> makeCoffee());\n        \n        // ì½œë°± ë“±ë¡(ë¹„ë™ê¸°)\n        future.thenAccept(coffee -> {\n            System.out.println(\"ì½œë°±: \" + coffee);\n        });\n        \n        // í•˜ì§€ë§Œ ì—¬ê¸°ì„œ ë¸”ë¡œí‚¹ ëŒ€ê¸°...\n        String coffee = future.get(); // ë¸”ë¡œí‚¹!\n        System.out.println(\"[ë¹„ë™ê¸°+ë¸”ë¡œí‚¹] \" + coffee);\n        // íŠ¹ì§•: ë¹„ë™ê¸°ë¡œ ì‹œì‘í–ˆì§€ë§Œ get()ì—ì„œ ë¸”ë¡œí‚¹\n    }\n    \n    // ============================================\n    // 4. ë¹„ë™ê¸° + ë…¼ë¸”ë¡œí‚¹: ê°€ì¥ íš¨ìœ¨ì \n    // ============================================\n    public static void asyncNonBlocking() {\n        System.out.println(\"[ë¹„ë™ê¸°+ë…¼ë¸”ë¡œí‚¹] ì£¼ë¬¸ ì‹œì‘\");\n        \n        CompletableFuture<String> future = CompletableFuture\n            .supplyAsync(() -> makeCoffee())\n            .thenAccept(coffee -> {\n                // ì½œë°±ìœ¼ë¡œ ê²°ê³¼ ìˆ˜ì‹ (ë¹„ë™ê¸°)\n                System.out.println(\"[ë¹„ë™ê¸°+ë…¼ë¸”ë¡œí‚¹] ì½œë°±: \" + coffee);\n            });\n        \n        // ì¦‰ì‹œ ë°˜í™˜(ë…¼ë¸”ë¡œí‚¹) - ë‹¤ë¥¸ ì‘ì—… ìˆ˜í–‰ ê°€ëŠ¥\n        System.out.println(\"ì£¼ë¬¸ ì™„ë£Œ, ë‹¤ë¥¸ ì¼ í•˜ëŠ” ì¤‘...\");\n        doOtherWork();\n        doOtherWork();\n        doOtherWork();\n        \n        // ë©”ì¸ ìŠ¤ë ˆë“œ ì¢…ë£Œ ë°©ì§€ (ì‹¤ì œë¡œëŠ” ì„œë²„ í™˜ê²½ì—ì„œ ë¶ˆí•„ìš”)\n        future.join();\n        // íŠ¹ì§•: ê°€ì¥ íš¨ìœ¨ì , ëŒ€ê¸° ì‹œê°„ ì—†ì´ ìì› í™œìš©\n    }\n    \n    private static void doOtherWork() {\n        System.out.println(\"  -> ë‹¤ë¥¸ ì‘ì—… ìˆ˜í–‰ ì¤‘...\");\n        try { Thread.sleep(500); } catch (InterruptedException e) {}\n    }\n    \n    public static void main(String[] args) throws Exception {\n        syncBlocking();\n        System.out.println(\"---\");\n        syncNonBlocking();\n        System.out.println(\"---\");\n        asyncBlocking();\n        System.out.println(\"---\");\n        asyncNonBlocking();\n    }\n}"
            },
            {
                "type": "code",
                "title": "Spring WebFlux ë¹„ë™ê¸° ë…¼ë¸”ë¡œí‚¹ ì‹¤ë¬´ ì½”ë“œ",
                "language": "java",
                "code": "// === Spring WebFlux: ë¹„ë™ê¸° + ë…¼ë¸”ë¡œí‚¹ì˜ ì •ì„ ===\n\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.reactive.function.client.WebClient;\nimport reactor.core.publisher.Mono;\nimport reactor.core.publisher.Flux;\nimport java.time.Duration;\n\n@RestController\npublic class AsyncNonBlockingController {\n    \n    private final WebClient webClient = WebClient.create();\n    \n    // === ë¹„ë™ê¸° + ë…¼ë¸”ë¡œí‚¹ API í˜¸ì¶œ ===\n    @GetMapping(\"/user/{id}\")\n    public Mono<User> getUser(@PathVariable String id) {\n        // WebClientëŠ” ë…¼ë¸”ë¡œí‚¹ HTTP í´ë¼ì´ì–¸íŠ¸\n        return webClient.get()\n            .uri(\"https://api.example.com/users/\" + id)\n            .retrieve()\n            .bodyToMono(User.class)\n            .timeout(Duration.ofSeconds(5))\n            .onErrorReturn(new User(\"fallback\", \"Unknown\"));\n        // ìŠ¤ë ˆë“œê°€ ë¸”ë¡œí‚¹ë˜ì§€ ì•ŠìŒ!\n    }\n    \n    // === ì—¬ëŸ¬ API ë™ì‹œ í˜¸ì¶œ (ë³‘ë ¬ ì²˜ë¦¬) ===\n    @GetMapping(\"/dashboard/{userId}\")\n    public Mono<Dashboard> getDashboard(@PathVariable String userId) {\n        // 3ê°œ APIë¥¼ ë™ì‹œì— í˜¸ì¶œ (ë…¼ë¸”ë¡œí‚¹)\n        Mono<User> userMono = webClient.get()\n            .uri(\"/users/\" + userId)\n            .retrieve().bodyToMono(User.class);\n        \n        Mono<List<Order>> ordersMono = webClient.get()\n            .uri(\"/orders?userId=\" + userId)\n            .retrieve().bodyToMono(new ParameterizedTypeReference<List<Order>>() {});\n        \n        Mono<List<Notification>> notificationsMono = webClient.get()\n            .uri(\"/notifications?userId=\" + userId)\n            .retrieve().bodyToMono(new ParameterizedTypeReference<List<Notification>>() {});\n        \n        // ëª¨ë“  ê²°ê³¼ë¥¼ ì¡°í•© (zip)\n        return Mono.zip(userMono, ordersMono, notificationsMono)\n            .map(tuple -> new Dashboard(\n                tuple.getT1(),  // User\n                tuple.getT2(),  // Orders\n                tuple.getT3()   // Notifications\n            ));\n        // ê°€ì¥ ëŠë¦° API ì‹œê°„ë§Œí¼ë§Œ ì†Œìš”! (ë³‘ë ¬ ì²˜ë¦¬)\n    }\n    \n    // === ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ (Server-Sent Events) ===\n    @GetMapping(value = \"/stream\", produces = \"text/event-stream\")\n    public Flux<String> streamEvents() {\n        // 1ì´ˆë§ˆë‹¤ ì´ë²¤íŠ¸ ì „ì†¡ (ë…¼ë¸”ë¡œí‚¹)\n        return Flux.interval(Duration.ofSeconds(1))\n            .map(seq -> \"Event \" + seq + \" at \" + System.currentTimeMillis());\n    }\n    \n    // === R2DBC: ë¹„ë™ê¸° ë…¼ë¸”ë¡œí‚¹ DB ì ‘ê·¼ ===\n    @Autowired\n    private UserRepository userRepository; // R2DBC Repository\n    \n    @GetMapping(\"/users\")\n    public Flux<User> getAllUsers() {\n        // JDBCëŠ” ë¸”ë¡œí‚¹, R2DBCëŠ” ë…¼ë¸”ë¡œí‚¹!\n        return userRepository.findAll()\n            .delayElements(Duration.ofMillis(100)); // ë°±í”„ë ˆì…” ì¡°ì ˆ\n    }\n}\n\n// === ë™ê¸° ë¸”ë¡œí‚¹ vs ë¹„ë™ê¸° ë…¼ë¸”ë¡œí‚¹ ì„±ëŠ¥ ë¹„êµ ===\n/*\nì‹œë‚˜ë¦¬ì˜¤: 1000ëª… ë™ì‹œ ìš”ì²­, API ì‘ë‹µ 1ì´ˆ\n\n[ë™ê¸° ë¸”ë¡œí‚¹ - Spring MVC + RestTemplate]\n- ìŠ¤ë ˆë“œ í’€: 200ê°œ\n- ë™ì‹œ ì²˜ë¦¬: 200ê°œ\n- ë‚˜ë¨¸ì§€ 800ê°œ: ëŒ€ê¸°\n- ì´ ì†Œìš”: ì•½ 5ì´ˆ\n\n[ë¹„ë™ê¸° ë…¼ë¸”ë¡œí‚¹ - Spring WebFlux + WebClient]\n- ìŠ¤ë ˆë“œ: 4ê°œ (CPU ì½”ì–´ ìˆ˜)\n- ë™ì‹œ ì²˜ë¦¬: 1000ê°œ ì „ë¶€!\n- ì´ ì†Œìš”: ì•½ 1ì´ˆ\n*/"
            },
            {
                "type": "tip",
                "title": "4ê°€ì§€ ì¡°í•© ë¹„êµí‘œ ë° ë©´ì ‘ ì§ˆë¬¸",
                "content": "## 4ê°€ì§€ ì¡°í•© ì™„ë²½ ë¹„êµí‘œ\n\n| ì¡°í•© | ì œì–´ê¶Œ | ê²°ê³¼ ìˆ˜ì‹  | ì˜ˆì‹œ | íš¨ìœ¨ì„± |\n|------|--------|----------|------|--------|\n| ë™ê¸°+ë¸”ë¡œí‚¹ | X | ì§ì ‘ | JDBC, RestTemplate | â˜…â˜†â˜†â˜† |\n| ë™ê¸°+ë…¼ë¸”ë¡œí‚¹ | O | ì§ì ‘(í´ë§) | Future.isDone() | â˜…â˜…â˜†â˜† |\n| ë¹„ë™ê¸°+ë¸”ë¡œí‚¹ | X | ì½œë°± | select() | â˜…â˜…â˜†â˜† |\n| ë¹„ë™ê¸°+ë…¼ë¸”ë¡œí‚¹ | O | ì½œë°± | WebFlux, Node.js | â˜…â˜…â˜…â˜… |\n\n### ì»¤í”¼ìˆ ë¹„ìœ  ì •ë¦¬\n```\në™ê¸°+ë¸”ë¡œí‚¹:     ì¹´ìš´í„°ì—ì„œ ë©í•˜ë‹ˆ ëŒ€ê¸°\në™ê¸°+ë…¼ë¸”ë¡œí‚¹:   ì¹´ìš´í„°ì—ì„œ \"ëë‚˜ìš”?\" ë°˜ë³µ\në¹„ë™ê¸°+ë¸”ë¡œí‚¹:   ì§„ë™ë²¨ ë°›ê³  ë©í•˜ë‹ˆ ë²¨ë§Œ ë´„\në¹„ë™ê¸°+ë…¼ë¸”ë¡œí‚¹: ì§„ë™ë²¨ ë°›ê³  ìë¦¬ì„œ ë‹¤ë¥¸ ì¼\n```\n\n### ë©´ì ‘ í•µì‹¬ ì§ˆë¬¸\n\n**Q1: ë™ê¸°/ë¹„ë™ê¸°ì™€ ë¸”ë¡œí‚¹/ë…¼ë¸”ë¡œí‚¹ì˜ ì°¨ì´?**\n```\në™ê¸°/ë¹„ë™ê¸°: ê²°ê³¼ë¥¼ ì–´ë–»ê²Œ ë°›ëŠ”ê°€?\n  - ë™ê¸°: ì§ì ‘ ëŒ€ê¸°í•˜ë©° ë°›ìŒ\n  - ë¹„ë™ê¸°: ì½œë°±/ì´ë²¤íŠ¸ë¡œ ë°›ìŒ\n\në¸”ë¡œí‚¹/ë…¼ë¸”ë¡œí‚¹: ëŒ€ê¸° ì¤‘ ì œì–´ê¶Œì´ ìˆëŠ”ê°€?\n  - ë¸”ë¡œí‚¹: ì™„ë£Œê¹Œì§€ ì œì–´ê¶Œ ì—†ìŒ\n  - ë…¼ë¸”ë¡œí‚¹: ì¦‰ì‹œ ì œì–´ê¶Œ ë°˜í™˜\n```\n\n**Q2: Spring MVC vs WebFlux ì°¨ì´?**\n```\nMVC: ë™ê¸°+ë¸”ë¡œí‚¹ (ìŠ¤ë ˆë“œ per ìš”ì²­)\n  - êµ¬í˜„ ì‰¬ì›€, ë””ë²„ê¹… ì‰¬ì›€\n  - ë™ì‹œ ì—°ê²° ë§ìœ¼ë©´ ìŠ¤ë ˆë“œ ë¶€ì¡±\n\nWebFlux: ë¹„ë™ê¸°+ë…¼ë¸”ë¡œí‚¹ (ì´ë²¤íŠ¸ ë£¨í”„)\n  - ì ì€ ìŠ¤ë ˆë“œë¡œ ë§ì€ ì—°ê²° ì²˜ë¦¬\n  - í•™ìŠµ ê³¡ì„  ë†’ìŒ, ë””ë²„ê¹… ì–´ë ¤ì›€\n```\n\n**Q3: ì–¸ì œ ë¬´ì—‡ì„ ì¨ì•¼ í•˜ë‚˜ìš”?**\n```\n- CPU ì§‘ì•½ì  ì‘ì—…: ë™ê¸° ë¸”ë¡œí‚¹ OK\n- I/O ì§‘ì•½ì  + ë™ì‹œ ì—°ê²° ë§ìŒ: ë¹„ë™ê¸° ë…¼ë¸”ë¡œí‚¹\n- ê°„ë‹¨í•œ CRUD API: Spring MVC\n- ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°: WebFlux\n```"
            }
        ]
    }

def create_critical_section_content():
    """ì„ê³„ ì˜ì—­ - í•œ ë²ˆì— í•˜ë‚˜ë§Œ"""
    return {
        "id": "05_ë™ê¸°í™”/critical-section",
        "title": "ì„ê³„ ì˜ì—­ (Critical Section)",
        "category": "os",
        "subCategory": "05_ë™ê¸°í™”",
        "language": "Java",
        "description": "ì„ê³„ ì˜ì—­ì˜ ê°œë…ê³¼ ë°œìƒ ì¡°ê±´, í•´ê²°ì„ ìœ„í•œ 3ê°€ì§€ ì¡°ê±´ì„ í•™ìŠµí•©ë‹ˆë‹¤.",
        "isPlaceholder": False,
        "sections": [
            {
                "type": "concept",
                "title": "ì„ê³„ ì˜ì—­: í•œ ë²ˆì— í•˜ë‚˜ë§Œ ë“¤ì–´ê°ˆ ìˆ˜ ìˆëŠ” êµ¬ì—­",
                "content": "## í™”ì¥ì‹¤ë¡œ ì´í•´í•˜ëŠ” ì„ê³„ ì˜ì—­\n\n### ë¹„ìœ : 1ì¸ìš© í™”ì¥ì‹¤\n```\n    [ëŒ€ê¸°ì¤„]     [í™”ì¥ì‹¤]     [ì‚¬ìš© ì¤‘]\n    ìŠ¤ë ˆë“œB  -->   ğŸš½    <--  ìŠ¤ë ˆë“œA\n    ìŠ¤ë ˆë“œC       (ì ê¸ˆ)       (ì‚¬ìš© ì¤‘)\n    \n    - í™”ì¥ì‹¤ = ì„ê³„ ì˜ì—­ (Critical Section)\n    - ë¬¸ ì ê¸ˆ = Lock/Mutex\n    - í•œ ë²ˆì— í•œ ëª…ë§Œ ì‚¬ìš© ê°€ëŠ¥!\n```\n\n### ì„ê³„ ì˜ì—­ì´ë€?\nê³µìœ  ìì›ì— ì ‘ê·¼í•˜ëŠ” ì½”ë“œ ì˜ì—­ìœ¼ë¡œ, **ë™ì‹œì— ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ì ‘ê·¼í•˜ë©´ ë¬¸ì œê°€ ë°œìƒ**í•˜ëŠ” êµ¬ê°„\n\n```\n[ê³µìœ  ìì›]          [ì„ê³„ ì˜ì—­]\n- ì „ì—­ ë³€ìˆ˜         - ì „ì—­ ë³€ìˆ˜ ì½ê¸°/ì“°ê¸°\n- íŒŒì¼              - íŒŒì¼ ì½ê¸°/ì“°ê¸°  \n- DB ë ˆì½”ë“œ         - DB UPDATE\n- ê³µìœ  ë©”ëª¨ë¦¬       - ê³µìœ  ë©”ëª¨ë¦¬ ì ‘ê·¼\n```\n\n### ì„ê³„ ì˜ì—­ ë¬¸ì œ ì˜ˆì‹œ: ì€í–‰ ê³„ì¢Œ\n```\n[ì´ˆê¸° ì”ì•¡: 1000ì›]\n\nìŠ¤ë ˆë“œA (ì¶œê¸ˆ 500ì›)        ìŠ¤ë ˆë“œB (ì¶œê¸ˆ 300ì›)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n1. ì”ì•¡ ì½ê¸°: 1000ì›\n                           2. ì”ì•¡ ì½ê¸°: 1000ì›\n3. ê³„ì‚°: 1000-500=500\n                           4. ê³„ì‚°: 1000-300=700\n5. ì”ì•¡ ì €ì¥: 500ì›\n                           6. ì”ì•¡ ì €ì¥: 700ì›\n\n[ìµœì¢… ì”ì•¡: 700ì›]  â† ì˜¤ë¥˜! ì‹¤ì œë¡œëŠ” 200ì›ì´ì–´ì•¼ í•¨\n```\n\n### ì„ê³„ ì˜ì—­ í•´ê²°ì˜ 3ê°€ì§€ ì¡°ê±´\n\n| ì¡°ê±´ | ì„¤ëª… | ë¹„ìœ  |\n|------|------|------|\n| **ìƒí˜¸ ë°°ì œ** (Mutual Exclusion) | í•œ ë²ˆì— í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë§Œ ì§„ì… | í™”ì¥ì‹¤ ë¬¸ ì ê¸ˆ |\n| **ì§„í–‰** (Progress) | ì•„ë¬´ë„ ì—†ìœ¼ë©´ ëŒ€ê¸° ì—†ì´ ì§„ì… ê°€ëŠ¥ | ë¹ˆ í™”ì¥ì‹¤ì€ ë°”ë¡œ ì…ì¥ |\n| **í•œì • ëŒ€ê¸°** (Bounded Waiting) | ë¬´í•œ ëŒ€ê¸° ë°©ì§€, ê³µì •í•˜ê²Œ ì§„ì… | ëŒ€ê¸° ìˆœì„œ ì§€í‚´ |"
            },
            {
                "type": "code",
                "title": "Java synchronizedë¡œ ì„ê³„ ì˜ì—­ ë³´í˜¸",
                "language": "java",
                "code": "public class CriticalSectionExample {\n    \n    // === ë¬¸ì œ ìƒí™©: ì„ê³„ ì˜ì—­ ë³´í˜¸ ì—†ìŒ ===\n    static class UnsafeBankAccount {\n        private int balance = 1000;\n        \n        // ì„ê³„ ì˜ì—­: balance ì½ê¸°/ì“°ê¸°\n        public void withdraw(int amount) {\n            if (balance >= amount) {\n                // ë¬¸ì œ ë°œìƒ ì§€ì !\n                // ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì´ ì½”ë“œ ì‹¤í–‰ ê°€ëŠ¥\n                int newBalance = balance - amount;\n                try { Thread.sleep(1); } catch (Exception e) {}\n                balance = newBalance;\n            }\n        }\n        \n        public int getBalance() { return balance; }\n    }\n    \n    // === í•´ê²°: synchronizedë¡œ ì„ê³„ ì˜ì—­ ë³´í˜¸ ===\n    static class SafeBankAccount {\n        private int balance = 1000;\n        private final Object lock = new Object();\n        \n        // ë°©ë²• 1: synchronized ë©”ì„œë“œ (this ì ê¸ˆ)\n        public synchronized void withdrawSync(int amount) {\n            if (balance >= amount) {\n                int newBalance = balance - amount;\n                try { Thread.sleep(1); } catch (Exception e) {}\n                balance = newBalance;\n            }\n        }\n        \n        // ë°©ë²• 2: synchronized ë¸”ë¡ (íŠ¹ì • ê°ì²´ ì ê¸ˆ)\n        public void withdrawBlock(int amount) {\n            synchronized (lock) {  // lock íšë“\n                // === ì„ê³„ ì˜ì—­ ì‹œì‘ ===\n                if (balance >= amount) {\n                    int newBalance = balance - amount;\n                    try { Thread.sleep(1); } catch (Exception e) {}\n                    balance = newBalance;\n                }\n                // === ì„ê³„ ì˜ì—­ ë ===\n            }  // lock ë°˜í™˜\n        }\n        \n        public int getBalance() { return balance; }\n    }\n    \n    public static void main(String[] args) throws Exception {\n        // ì•ˆì „í•˜ì§€ ì•Šì€ ê³„ì¢Œ í…ŒìŠ¤íŠ¸\n        UnsafeBankAccount unsafeAccount = new UnsafeBankAccount();\n        Thread t1 = new Thread(() -> {\n            for (int i = 0; i < 100; i++) unsafeAccount.withdraw(5);\n        });\n        Thread t2 = new Thread(() -> {\n            for (int i = 0; i < 100; i++) unsafeAccount.withdraw(5);\n        });\n        t1.start(); t2.start();\n        t1.join(); t2.join();\n        System.out.println(\"[Unsafe] ì˜ˆìƒ: 0, ì‹¤ì œ: \" + unsafeAccount.getBalance());\n        \n        // ì•ˆì „í•œ ê³„ì¢Œ í…ŒìŠ¤íŠ¸\n        SafeBankAccount safeAccount = new SafeBankAccount();\n        Thread t3 = new Thread(() -> {\n            for (int i = 0; i < 100; i++) safeAccount.withdrawSync(5);\n        });\n        Thread t4 = new Thread(() -> {\n            for (int i = 0; i < 100; i++) safeAccount.withdrawSync(5);\n        });\n        t3.start(); t4.start();\n        t3.join(); t4.join();\n        System.out.println(\"[Safe] ì˜ˆìƒ: 0, ì‹¤ì œ: \" + safeAccount.getBalance());\n    }\n}"
            },
            {
                "type": "code",
                "title": "ë‹¤ì–‘í•œ ì„ê³„ ì˜ì—­ ë³´í˜¸ ë°©ë²•",
                "language": "java",
                "code": "import java.util.concurrent.locks.*;\nimport java.util.concurrent.atomic.*;\n\npublic class CriticalSectionSolutions {\n    \n    // === 1. ReentrantLock: ëª…ì‹œì  ì ê¸ˆ ===\n    static class LockAccount {\n        private int balance = 1000;\n        private final Lock lock = new ReentrantLock();\n        \n        public void withdraw(int amount) {\n            lock.lock();  // ì ê¸ˆ íšë“\n            try {\n                // === ì„ê³„ ì˜ì—­ ===\n                if (balance >= amount) {\n                    balance -= amount;\n                }\n            } finally {\n                lock.unlock();  // ë°˜ë“œì‹œ í•´ì œ!\n            }\n        }\n        \n        // tryLock: ì ê¸ˆ ì‹œë„ (ëŒ€ê¸°í•˜ì§€ ì•ŠìŒ)\n        public boolean tryWithdraw(int amount) {\n            if (lock.tryLock()) {\n                try {\n                    if (balance >= amount) {\n                        balance -= amount;\n                        return true;\n                    }\n                } finally {\n                    lock.unlock();\n                }\n            }\n            return false; // ì ê¸ˆ ì‹¤íŒ¨\n        }\n    }\n    \n    // === 2. AtomicInteger: Lock-free ë™ê¸°í™” ===\n    static class AtomicAccount {\n        private AtomicInteger balance = new AtomicInteger(1000);\n        \n        public void withdraw(int amount) {\n            // CAS (Compare-And-Swap) ì—°ì‚° ì‚¬ìš©\n            int current, newValue;\n            do {\n                current = balance.get();\n                if (current < amount) return;\n                newValue = current - amount;\n            } while (!balance.compareAndSet(current, newValue));\n            // ì‹¤íŒ¨í•˜ë©´ ì¬ì‹œë„ (ë‚™ê´€ì  ë½)\n        }\n        \n        // ë” ê°„ë‹¨í•œ ë°©ë²•\n        public void withdrawSimple(int amount) {\n            balance.addAndGet(-amount);\n        }\n    }\n    \n    // === 3. ReadWriteLock: ì½ê¸°/ì“°ê¸° ë¶„ë¦¬ ===\n    static class ReadWriteAccount {\n        private int balance = 1000;\n        private final ReadWriteLock rwLock = new ReentrantReadWriteLock();\n        private final Lock readLock = rwLock.readLock();\n        private final Lock writeLock = rwLock.writeLock();\n        \n        // ì½ê¸°: ì—¬ëŸ¬ ìŠ¤ë ˆë“œ ë™ì‹œ ê°€ëŠ¥\n        public int getBalance() {\n            readLock.lock();\n            try {\n                return balance;\n            } finally {\n                readLock.unlock();\n            }\n        }\n        \n        // ì“°ê¸°: í•œ ìŠ¤ë ˆë“œë§Œ ê°€ëŠ¥\n        public void withdraw(int amount) {\n            writeLock.lock();\n            try {\n                if (balance >= amount) {\n                    balance -= amount;\n                }\n            } finally {\n                writeLock.unlock();\n            }\n        }\n    }\n    \n    // === ì„±ëŠ¥ ë¹„êµ ===\n    /*\n    ìƒí™©: ì½ê¸° 80%, ì“°ê¸° 20%\n    \n    synchronized:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (ì½ê¸°ë„ ì§ë ¬í™”)\n    ReentrantLock:    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (ì½ê¸°ë„ ì§ë ¬í™”)\n    ReadWriteLock:    â–ˆâ–ˆâ–ˆâ–ˆ (ì½ê¸° ë³‘ë ¬ ê°€ëŠ¥)\n    AtomicInteger:    â–ˆâ–ˆ (Lock-free, ê°€ì¥ ë¹ ë¦„)\n    \n    ì„ íƒ ê¸°ì¤€:\n    - ë‹¨ìˆœí•œ ê²½ìš°: synchronized\n    - íƒ€ì„ì•„ì›ƒ í•„ìš”: ReentrantLock\n    - ì½ê¸° ë§ìŒ: ReadWriteLock\n    - ë‹¨ì¼ ë³€ìˆ˜: AtomicInteger\n    */\n}"
            },
            {
                "type": "tip",
                "title": "ë©´ì ‘ ëŒ€ë¹„ í•µì‹¬ ì •ë¦¬",
                "content": "## ì„ê³„ ì˜ì—­ í•µì‹¬ ìš”ì•½\n\n### ë©´ì ‘ ë‹µë³€ í…œí”Œë¦¿\n```\n\"ì„ê³„ ì˜ì—­ì€ ê³µìœ  ìì›ì— ì ‘ê·¼í•˜ëŠ” ì½”ë“œ ì˜ì—­ìœ¼ë¡œ,\nì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì ‘ê·¼í•˜ë©´ Race Conditionì´ ë°œìƒí•©ë‹ˆë‹¤.\n\ní™”ì¥ì‹¤ì— ë¹„ìœ í•˜ë©´, 1ì¸ìš© í™”ì¥ì‹¤ì²˜ëŸ¼ í•œ ë²ˆì— í•œ ëª…ë§Œ\nì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë³´í˜¸í•´ì•¼ í•˜ëŠ” êµ¬ì—­ì…ë‹ˆë‹¤.\n\ní•´ê²°ì„ ìœ„í•´ì„œëŠ” ìƒí˜¸ ë°°ì œ(í•œ ë²ˆì— í•˜ë‚˜),\nì§„í–‰(ë¹ˆ ê³³ì€ ë°”ë¡œ ì§„ì…), í•œì • ëŒ€ê¸°(ë¬´í•œ ëŒ€ê¸° ë°©ì§€)\nì„¸ ê°€ì§€ ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼ í•©ë‹ˆë‹¤.\"\n```\n\n### ë™ê¸°í™” ë„êµ¬ ë¹„êµí‘œ\n| ë„êµ¬ | íŠ¹ì§• | ì‚¬ìš© ì‹œê¸° |\n|------|------|----------|\n| synchronized | ê°„ë‹¨, ìë™ í•´ì œ | ê¸°ë³¸ì ì¸ ë™ê¸°í™” |\n| ReentrantLock | íƒ€ì„ì•„ì›ƒ, ê³µì •ì„± | ì„¸ë°€í•œ ì œì–´ í•„ìš” |\n| ReadWriteLock | ì½ê¸° ë³‘ë ¬í™” | ì½ê¸° >> ì“°ê¸° |\n| Atomic í´ë˜ìŠ¤ | Lock-free | ë‹¨ì¼ ë³€ìˆ˜ ì—°ì‚° |\n\n### ìì£¼ ë‚˜ì˜¤ëŠ” ë©´ì ‘ ì§ˆë¬¸\n\n**Q1: ì„ê³„ ì˜ì—­ì´ë€?**\n- ê³µìœ  ìì›ì— ì ‘ê·¼í•˜ëŠ” ì½”ë“œ ì˜ì—­ìœ¼ë¡œ, ë™ì‹œ ì ‘ê·¼ ì‹œ ë¬¸ì œ ë°œìƒ\n\n**Q2: Race Conditionì´ë€?**\n- ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ê³µìœ  ìì›ì— ë™ì‹œ ì ‘ê·¼í•˜ì—¬ ê²°ê³¼ê°€ ì‹¤í–‰ ìˆœì„œì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ” ìƒí™©\n\n**Q3: synchronized vs Lock ì°¨ì´?**\n- synchronized: ì•”ë¬µì , ìë™ í•´ì œ, ë‹¨ìˆœ\n- Lock: ëª…ì‹œì , ìˆ˜ë™ í•´ì œ, íƒ€ì„ì•„ì›ƒ/ì¡°ê±´ ì§€ì›\n\n**Q4: ì„ê³„ ì˜ì—­ í•´ê²°ì˜ 3ê°€ì§€ ì¡°ê±´?**\n- ìƒí˜¸ ë°°ì œ: ë™ì‹œ ì§„ì… ë¶ˆê°€\n- ì§„í–‰: ë¹ˆ ê³³ì€ ì¦‰ì‹œ ì§„ì…\n- í•œì • ëŒ€ê¸°: ë¬´í•œ ëŒ€ê¸° ë°©ì§€"
            }
        ]
    }

def create_mutex_semaphore_content():
    """ë®¤í…ìŠ¤ vs ì„¸ë§ˆí¬ì–´ ë¹„êµ"""
    return {
        "id": "05_ë™ê¸°í™”/mutex-semaphore",
        "title": "ë®¤í…ìŠ¤ vs ì„¸ë§ˆí¬ì–´",
        "category": "os",
        "subCategory": "05_ë™ê¸°í™”",
        "language": "Java",
        "description": "ë®¤í…ìŠ¤ì™€ ì„¸ë§ˆí¬ì–´ì˜ ì°¨ì´ì ì„ í™”ì¥ì‹¤ê³¼ ì£¼ì°¨ì¥ ë¹„ìœ ë¡œ ì´í•´í•˜ê³ , ì‹¤ë¬´ì—ì„œì˜ í™œìš©ë²•ì„ í•™ìŠµí•©ë‹ˆë‹¤.",
        "isPlaceholder": False,
        "sections": [
            {
                "type": "concept",
                "title": "ë®¤í…ìŠ¤ vs ì„¸ë§ˆí¬ì–´: í™”ì¥ì‹¤ê³¼ ì£¼ì°¨ì¥",
                "content": "## ë¹„ìœ ë¡œ ì´í•´í•˜ëŠ” ë®¤í…ìŠ¤ì™€ ì„¸ë§ˆí¬ì–´\n\n### ë®¤í…ìŠ¤(Mutex): 1ì¸ìš© í™”ì¥ì‹¤\n```\n    ğŸš½ [1ì¸ìš© í™”ì¥ì‹¤]       ğŸ”‘ [ì—´ì‡  1ê°œ]\n    \n    ìƒí™©: ì—´ì‡ ê°€ 1ê°œë¿!\n    - ì‚¬ìš©í•˜ë ¤ë©´ ì—´ì‡ ë¥¼ ê°€ì ¸ê°\n    - ë‚˜ì˜¬ ë•Œ ì—´ì‡ ë¥¼ ë°˜ë‚©\n    - ì—´ì‡  ì—†ìœ¼ë©´ ëŒ€ê¸°\n    \n    íŠ¹ì§•:\n    - ì†Œìœ ê¶Œ ê°œë…: ì ê·¼ ì‚¬ëŒë§Œ ì—´ ìˆ˜ ìˆìŒ\n    - Binary(0 ë˜ëŠ” 1)\n    - ìƒí˜¸ ë°°ì œ(Mutual Exclusion)ì˜ ì•½ì\n```\n\n### ì„¸ë§ˆí¬ì–´(Semaphore): ì£¼ì°¨ì¥ (Nì¹¸)\n```\n    ğŸ…¿ï¸ [ì£¼ì°¨ì¥ 3ì¹¸]        ğŸ“Ÿ [ì¹´ìš´í„°: 3]\n    \n    ìƒí™©: ì£¼ì°¨ ê°€ëŠ¥ ëŒ€ìˆ˜ í‘œì‹œ!\n    - ì…ì¥ ì‹œ: ì¹´ìš´í„° -1\n    - í‡´ì¥ ì‹œ: ì¹´ìš´í„° +1\n    - ì¹´ìš´í„° 0ì´ë©´ ëŒ€ê¸°\n    \n    íŠ¹ì§•:\n    - ì†Œìœ ê¶Œ ì—†ìŒ: ì•„ë¬´ë‚˜ ì‹ í˜¸ ë³´ë‚¼ ìˆ˜ ìˆìŒ\n    - Counting(0 ~ N)\n    - ìì› ê°œìˆ˜ ê´€ë¦¬\n```\n\n### í•µì‹¬ ì°¨ì´ì \n\n| êµ¬ë¶„ | ë®¤í…ìŠ¤ | ì„¸ë§ˆí¬ì–´ |\n|------|--------|----------|\n| ë¹„ìœ  | 1ì¸ìš© í™”ì¥ì‹¤ ì—´ì‡  | ì£¼ì°¨ì¥ ì¹´ìš´í„° |\n| ê°’ ë²”ìœ„ | 0 ë˜ëŠ” 1 (Binary) | 0 ~ N (Counting) |\n| ì†Œìœ ê¶Œ | ìˆìŒ (ì ê·¼ ìŠ¤ë ˆë“œë§Œ í•´ì œ) | ì—†ìŒ (ì•„ë¬´ë‚˜ signal ê°€ëŠ¥) |\n| ìš©ë„ | ìƒí˜¸ ë°°ì œ | ìì› ê°œìˆ˜ ì œí•œ, ìˆœì„œ ì œì–´ |\n| í•´ì œ ì¡°ê±´ | ì†Œìœ  ìŠ¤ë ˆë“œë§Œ | ì•„ë¬´ ìŠ¤ë ˆë“œë‚˜ |\n\n### Binary Semaphore vs Mutex\n```\nBinary Semaphore (ê°’ì´ 0 ë˜ëŠ” 1):\n  - ì†Œìœ ê¶Œ ì—†ìŒ\n  - ìŠ¤ë ˆë“œ Aê°€ wait(), ìŠ¤ë ˆë“œ Bê°€ signal() ê°€ëŠ¥\n  - ì£¼ë¡œ ë™ê¸°í™”(ìˆœì„œ ì œì–´)ì— ì‚¬ìš©\n\nMutex:\n  - ì†Œìœ ê¶Œ ìˆìŒ\n  - ì ê·¼ ìŠ¤ë ˆë“œë§Œ í•´ì œ ê°€ëŠ¥\n  - ì£¼ë¡œ ìƒí˜¸ ë°°ì œì— ì‚¬ìš©\n```"
            },
            {
                "type": "code",
                "title": "Java Semaphore í™œìš© ì˜ˆì‹œ",
                "language": "java",
                "code": "import java.util.concurrent.Semaphore;\nimport java.util.concurrent.locks.ReentrantLock;\n\npublic class MutexSemaphoreExample {\n    \n    // === ë®¤í…ìŠ¤: ReentrantLock (ì†Œìœ ê¶Œ ìˆìŒ) ===\n    static class MutexExample {\n        private final ReentrantLock mutex = new ReentrantLock();\n        private int sharedResource = 0;\n        \n        public void accessResource(String threadName) {\n            mutex.lock();  // ì—´ì‡  íšë“\n            try {\n                System.out.println(threadName + \": í™”ì¥ì‹¤ ì…ì¥\");\n                sharedResource++;\n                Thread.sleep(1000);  // ì‚¬ìš© ì¤‘\n                System.out.println(threadName + \": í™”ì¥ì‹¤ í‡´ì¥\");\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n            } finally {\n                mutex.unlock();  // ì—´ì‡  ë°˜ë‚© (ì ê·¼ ìŠ¤ë ˆë“œë§Œ ê°€ëŠ¥!)\n            }\n        }\n    }\n    \n    // === ì„¸ë§ˆí¬ì–´: ë™ì‹œ ì ‘ê·¼ ìˆ˜ ì œí•œ ===\n    static class ParkingLot {\n        private final Semaphore parking = new Semaphore(3); // ì£¼ì°¨ 3ì¹¸\n        \n        public void park(String carName) {\n            try {\n                System.out.println(carName + \": ì£¼ì°¨ ëŒ€ê¸° (ë‚¨ì€ ìë¦¬: \" \n                    + parking.availablePermits() + \")\");\n                \n                parking.acquire();  // Pì—°ì‚°: ì¹´ìš´í„° -1\n                System.out.println(carName + \": ì£¼ì°¨ ì™„ë£Œ!\");\n                \n                Thread.sleep(2000);  // ì£¼ì°¨ ì¤‘\n                \n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n            } finally {\n                parking.release();  // Vì—°ì‚°: ì¹´ìš´í„° +1\n                System.out.println(carName + \": ì¶œì°¨ ì™„ë£Œ!\");\n            }\n        }\n    }\n    \n    // === ì„¸ë§ˆí¬ì–´ë¡œ ìˆœì„œ ì œì–´ (ë™ê¸°í™”) ===\n    static class OrderedExecution {\n        private final Semaphore step1Done = new Semaphore(0);\n        private final Semaphore step2Done = new Semaphore(0);\n        \n        public void step1() {\n            System.out.println(\"Step 1 ì‹¤í–‰\");\n            step1Done.release();  // Step 1 ì™„ë£Œ ì‹ í˜¸\n        }\n        \n        public void step2() throws InterruptedException {\n            step1Done.acquire();  // Step 1 ì™„ë£Œ ëŒ€ê¸°\n            System.out.println(\"Step 2 ì‹¤í–‰\");\n            step2Done.release();  // Step 2 ì™„ë£Œ ì‹ í˜¸\n        }\n        \n        public void step3() throws InterruptedException {\n            step2Done.acquire();  // Step 2 ì™„ë£Œ ëŒ€ê¸°\n            System.out.println(\"Step 3 ì‹¤í–‰\");\n        }\n    }\n    \n    public static void main(String[] args) {\n        // ì£¼ì°¨ì¥ í…ŒìŠ¤íŠ¸\n        ParkingLot lot = new ParkingLot();\n        for (int i = 1; i <= 5; i++) {\n            final String carName = \"ì°¨ëŸ‰\" + i;\n            new Thread(() -> lot.park(carName)).start();\n        }\n        // ê²°ê³¼: 3ëŒ€ ë™ì‹œ ì£¼ì°¨, 2ëŒ€ëŠ” ëŒ€ê¸° í›„ ìˆœì°¨ ì£¼ì°¨\n    }\n}"
            },
            {
                "type": "code",
                "title": "ìƒì‚°ì-ì†Œë¹„ì ë¬¸ì œ í•´ê²°",
                "language": "java",
                "code": "import java.util.concurrent.Semaphore;\nimport java.util.LinkedList;\nimport java.util.Queue;\n\n// === ì„¸ë§ˆí¬ì–´ë¡œ ìƒì‚°ì-ì†Œë¹„ì ë¬¸ì œ í•´ê²° ===\npublic class ProducerConsumer {\n    \n    private static final int BUFFER_SIZE = 5;\n    private final Queue<Integer> buffer = new LinkedList<>();\n    \n    // ì„¸ë§ˆí¬ì–´ 3ê°œ ì‚¬ìš©\n    private final Semaphore empty = new Semaphore(BUFFER_SIZE); // ë¹ˆ ê³µê°„ ìˆ˜\n    private final Semaphore full = new Semaphore(0);            // ì±„ì›Œì§„ ê³µê°„ ìˆ˜\n    private final Semaphore mutex = new Semaphore(1);           // ìƒí˜¸ ë°°ì œìš©\n    \n    /*\n    ë²„í¼ ìƒíƒœ ì‹œê°í™”:\n    \n    ì´ˆê¸°: [  ][  ][  ][  ][  ]  empty=5, full=0\n    \n    ìƒì‚° í›„: [1][  ][  ][  ][  ]  empty=4, full=1\n    \n    ê°€ë“ ì°¸: [1][2][3][4][5]  empty=0, full=5\n    (ìƒì‚°ì ë¸”ë¡œí‚¹!)\n    \n    ì†Œë¹„ í›„: [  ][2][3][4][5]  empty=1, full=4\n    */\n    \n    public void produce(int item) throws InterruptedException {\n        empty.acquire();  // ë¹ˆ ê³µê°„ ìˆëŠ”ì§€ í™•ì¸ (ì—†ìœ¼ë©´ ëŒ€ê¸°)\n        mutex.acquire();  // ë²„í¼ ì ‘ê·¼ ì ê¸ˆ\n        try {\n            buffer.add(item);\n            System.out.println(\"ìƒì‚°: \" + item + \" (ë²„í¼ í¬ê¸°: \" + buffer.size() + \")\");\n        } finally {\n            mutex.release();  // ë²„í¼ ì ‘ê·¼ í•´ì œ\n            full.release();   // ì±„ì›Œì§„ ê³µê°„ +1\n        }\n    }\n    \n    public int consume() throws InterruptedException {\n        full.acquire();   // ì±„ì›Œì§„ ê³µê°„ ìˆëŠ”ì§€ í™•ì¸ (ì—†ìœ¼ë©´ ëŒ€ê¸°)\n        mutex.acquire();  // ë²„í¼ ì ‘ê·¼ ì ê¸ˆ\n        try {\n            int item = buffer.poll();\n            System.out.println(\"ì†Œë¹„: \" + item + \" (ë²„í¼ í¬ê¸°: \" + buffer.size() + \")\");\n            return item;\n        } finally {\n            mutex.release();  // ë²„í¼ ì ‘ê·¼ í•´ì œ\n            empty.release();  // ë¹ˆ ê³µê°„ +1\n        }\n    }\n    \n    public static void main(String[] args) {\n        ProducerConsumer pc = new ProducerConsumer();\n        \n        // ìƒì‚°ì ìŠ¤ë ˆë“œ\n        Thread producer = new Thread(() -> {\n            try {\n                for (int i = 1; i <= 10; i++) {\n                    pc.produce(i);\n                    Thread.sleep(100);\n                }\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n            }\n        });\n        \n        // ì†Œë¹„ì ìŠ¤ë ˆë“œ\n        Thread consumer = new Thread(() -> {\n            try {\n                for (int i = 1; i <= 10; i++) {\n                    pc.consume();\n                    Thread.sleep(300);  // ì†Œë¹„ê°€ ë” ëŠë¦¼\n                }\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n            }\n        });\n        \n        producer.start();\n        consumer.start();\n    }\n}\n\n/*\nì‹¤í–‰ ê²°ê³¼:\nìƒì‚°: 1 (ë²„í¼ í¬ê¸°: 1)\nìƒì‚°: 2 (ë²„í¼ í¬ê¸°: 2)\nìƒì‚°: 3 (ë²„í¼ í¬ê¸°: 3)\nì†Œë¹„: 1 (ë²„í¼ í¬ê¸°: 2)  <- ì†Œë¹„ ì‹œì‘\nìƒì‚°: 4 (ë²„í¼ í¬ê¸°: 3)\nìƒì‚°: 5 (ë²„í¼ í¬ê¸°: 4)\nìƒì‚°: 6 (ë²„í¼ í¬ê¸°: 5)  <- ë²„í¼ ê°€ë“ ì°¸\nì†Œë¹„: 2 (ë²„í¼ í¬ê¸°: 4)  <- ì†Œë¹„í•´ì•¼ ìƒì‚° ê°€ëŠ¥\nìƒì‚°: 7 (ë²„í¼ í¬ê¸°: 5)\n...\n*/"
            },
            {
                "type": "tip",
                "title": "ë©´ì ‘ ëŒ€ë¹„ í•µì‹¬ ì •ë¦¬",
                "content": "## ë®¤í…ìŠ¤ vs ì„¸ë§ˆí¬ì–´ í•µì‹¬ ìš”ì•½\n\n### ë©´ì ‘ ë‹µë³€ í…œí”Œë¦¿\n```\n\"ë®¤í…ìŠ¤ëŠ” 1ì¸ìš© í™”ì¥ì‹¤ ì—´ì‡ ì²˜ëŸ¼ í•œ ë²ˆì— í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œ\nìì›ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•˜ë©°, ì ê·¼ ìŠ¤ë ˆë“œë§Œ í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì„¸ë§ˆí¬ì–´ëŠ” ì£¼ì°¨ì¥ ì¹´ìš´í„°ì²˜ëŸ¼ ë™ì‹œì— Nê°œì˜ ìŠ¤ë ˆë“œê°€\nìì›ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•˜ë©°, ì•„ë¬´ ìŠ¤ë ˆë“œë‚˜ ì‹ í˜¸ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\ní•µì‹¬ ì°¨ì´ëŠ” ì†Œìœ ê¶Œì…ë‹ˆë‹¤.\në®¤í…ìŠ¤ëŠ” ì†Œìœ ê¶Œì´ ìˆê³ , ì„¸ë§ˆí¬ì–´ëŠ” ì†Œìœ ê¶Œì´ ì—†ìŠµë‹ˆë‹¤.\"\n```\n\n### ë¹„êµí‘œ\n| êµ¬ë¶„ | ë®¤í…ìŠ¤ | ì„¸ë§ˆí¬ì–´ |\n|------|--------|----------|\n| ë¹„ìœ  | í™”ì¥ì‹¤ ì—´ì‡  | ì£¼ì°¨ì¥ ì¹´ìš´í„° |\n| ë™ì‹œ ì ‘ê·¼ | 1ê°œ | Nê°œ |\n| ì†Œìœ ê¶Œ | ìˆìŒ | ì—†ìŒ |\n| ì£¼ìš” ìš©ë„ | ìƒí˜¸ ë°°ì œ | ìì› ìˆ˜ ì œí•œ, ìˆœì„œ ì œì–´ |\n| Java | ReentrantLock | Semaphore |\n\n### P/V ì—°ì‚° (ì„¸ë§ˆí¬ì–´)\n```\nPì—°ì‚° (wait/acquire): ì¹´ìš´í„° -1, 0ì´ë©´ ëŒ€ê¸°\nVì—°ì‚° (signal/release): ì¹´ìš´í„° +1, ëŒ€ê¸° ì¤‘ì¸ ìŠ¤ë ˆë“œ ê¹¨ì›€\n```\n\n### ìì£¼ ë‚˜ì˜¤ëŠ” ë©´ì ‘ ì§ˆë¬¸\n\n**Q1: ë®¤í…ìŠ¤ì™€ ì„¸ë§ˆí¬ì–´ ì°¨ì´?**\n- ë®¤í…ìŠ¤: ì†Œìœ ê¶Œ ìˆìŒ, ì ê·¼ ìŠ¤ë ˆë“œë§Œ í•´ì œ\n- ì„¸ë§ˆí¬ì–´: ì†Œìœ ê¶Œ ì—†ìŒ, ì•„ë¬´ë‚˜ signal ê°€ëŠ¥\n\n**Q2: Binary Semaphoreì™€ Mutex ì°¨ì´?**\n- ë‘˜ ë‹¤ ê°’ì€ 0 ë˜ëŠ” 1ì´ì§€ë§Œ, ì†Œìœ ê¶Œ ìœ ë¬´ê°€ ë‹¤ë¦„\n- MutexëŠ” ì ê·¼ ìŠ¤ë ˆë“œë§Œ í•´ì œ ê°€ëŠ¥\n\n**Q3: ì„¸ë§ˆí¬ì–´ëŠ” ì–¸ì œ ì‚¬ìš©?**\n- DB ì»¤ë„¥ì…˜ í’€ ì œí•œ (ë™ì‹œ ì ‘ê·¼ ìˆ˜ ì œí•œ)\n- ìƒì‚°ì-ì†Œë¹„ì ë¬¸ì œ (ìˆœì„œ ì œì–´)\n- Rate Limiting (ë™ì‹œ ìš”ì²­ ìˆ˜ ì œí•œ)\n\n**Q4: ìƒì‚°ì-ì†Œë¹„ì ë¬¸ì œì—ì„œ ì„¸ë§ˆí¬ì–´ ì—­í• ?**\n- empty: ë¹ˆ ê³µê°„ ìˆ˜ (ìƒì‚°ì ëŒ€ê¸°)\n- full: ì±„ì›Œì§„ ê³µê°„ ìˆ˜ (ì†Œë¹„ì ëŒ€ê¸°)\n- mutex: ë²„í¼ ì ‘ê·¼ ìƒí˜¸ ë°°ì œ"
            }
        ]
    }

def create_deadlock_solution_content():
    """ë°ë“œë½ í•´ê²° ë°©ë²• - ì˜ˆë°©, íšŒí”¼, íƒì§€, íšŒë³µ"""
    return {
        "id": "05_ë™ê¸°í™”/deadlock-solution",
        "title": "ë°ë“œë½ í•´ê²° ë°©ë²•",
        "category": "os",
        "subCategory": "05_ë™ê¸°í™”",
        "language": "Java",
        "description": "ë°ë“œë½ì˜ 4ê°€ì§€ í•„ìš”ì¡°ê±´ê³¼ í•´ê²° ë°©ë²•(ì˜ˆë°©, íšŒí”¼, íƒì§€, íšŒë³µ)ì„ ì‹¤ë¬´ ì˜ˆì‹œì™€ í•¨ê»˜ í•™ìŠµí•©ë‹ˆë‹¤.",
        "isPlaceholder": False,
        "sections": [
            {
                "type": "concept",
                "title": "ë°ë“œë½ê³¼ 4ê°€ì§€ í•´ê²° ì „ëµ",
                "content": "## êµì°© ìƒíƒœ(Deadlock) ì´í•´í•˜ê¸°\n\n### ë¹„ìœ : ì¢ì€ ê³¨ëª©ê¸¸ì—ì„œ ë§ˆì£¼ì¹œ ë‘ ì°¨\n```\n    â† ì°¨A [====]        [====] ì°¨B â†’\n              â†‘        â†‘\n           ì§„í–‰ë¶ˆê°€  ì§„í–‰ë¶ˆê°€\n           \n    ë‘˜ ë‹¤ ì–‘ë³´ ì•ˆí•˜ë©´ ì˜ì›íˆ ë©ˆì¶¤!\n```\n\n### ë°ë“œë½ ë°œìƒì˜ 4ê°€ì§€ í•„ìš”ì¡°ê±´ (ëª¨ë‘ ì¶©ì¡± ì‹œ ë°œìƒ)\n\n| ì¡°ê±´ | ì„¤ëª… | ë¹„ìœ  |\n|------|------|------|\n| **ìƒí˜¸ ë°°ì œ** | ìì›ì€ í•œ ë²ˆì— í•˜ë‚˜ë§Œ ì‚¬ìš© | ì¼ë°©í†µí–‰ ê³¨ëª© |\n| **ì ìœ  ëŒ€ê¸°** | ìì› ë³´ìœ í•˜ë©° ë‹¤ë¥¸ ìì› ëŒ€ê¸° | ë‚´ ì°¨ ì•ˆë†“ê³  ê¸°ë‹¤ë¦¼ |\n| **ë¹„ì„ ì ** | ê°•ì œë¡œ ë¹¼ì•—ì„ ìˆ˜ ì—†ìŒ | ì°¨ë¥¼ ë°€ì–´ë²„ë¦´ ìˆ˜ ì—†ìŒ |\n| **ìˆœí™˜ ëŒ€ê¸°** | ì›í˜•ìœ¼ë¡œ ì„œë¡œ ëŒ€ê¸° | Aâ†’B, Bâ†’A ëŒ€ê¸° |\n\n### 4ê°€ì§€ í•´ê²° ì „ëµ\n\n```\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚             ë°ë“œë½ í•´ê²° ì „ëµ                 â”‚\n    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n    â”‚   ì˜ˆë°©      â”‚   íšŒí”¼      â”‚  íƒì§€ & íšŒë³µ   â”‚\n    â”‚ Prevention  â”‚  Avoidance  â”‚ Detection &    â”‚\n    â”‚             â”‚             â”‚   Recovery     â”‚\n    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n    â”‚ ì¡°ê±´ ìì²´ë¥¼ â”‚ ì•ˆì „ ìƒíƒœë§Œ â”‚ ë°œìƒ í›„ í•´ê²°  â”‚\n    â”‚ ì œê±°        â”‚ í—ˆìš©        â”‚               â”‚\n    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n    â”‚ ìì› ë‚­ë¹„â†‘  â”‚ ì˜¤ë²„í—¤ë“œâ†‘   â”‚ ìì› íš¨ìœ¨â†‘   â”‚\n    â”‚ êµ¬í˜„ ì‰¬ì›€   â”‚ ì€í–‰ì›ì•Œê³ ë¦¬ì¦˜â”‚ ì£¼ê¸°ì  ê²€ì‚¬  â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### 1. ì˜ˆë°© (Prevention)\n- 4ê°€ì§€ ì¡°ê±´ ì¤‘ í•˜ë‚˜ ì´ìƒ ì œê±°\n- **ìƒí˜¸ ë°°ì œ ì œê±°**: ë¶ˆê°€ëŠ¥ (ìì› íŠ¹ì„±)\n- **ì ìœ  ëŒ€ê¸° ì œê±°**: ëª¨ë“  ìì›ì„ í•œ ë²ˆì— ìš”ì²­\n- **ë¹„ì„ ì  ì œê±°**: ê°•ì œ ìì› íšŒìˆ˜ í—ˆìš©\n- **ìˆœí™˜ ëŒ€ê¸° ì œê±°**: ìì› ë²ˆí˜¸ ìˆœì„œëŒ€ë¡œ ìš”ì²­\n\n### 2. íšŒí”¼ (Avoidance)\n- ì•ˆì „ ìƒíƒœ(Safe State)ë§Œ í—ˆìš©\n- ì€í–‰ì› ì•Œê³ ë¦¬ì¦˜ (Banker's Algorithm)\n\n### 3. íƒì§€ & íšŒë³µ (Detection & Recovery)\n- ì£¼ê¸°ì ìœ¼ë¡œ ë°ë“œë½ ê²€ì‚¬\n- ë°œê²¬ ì‹œ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ ë˜ëŠ” ìì› ì„ ì "
            },
            {
                "type": "code",
                "title": "ë°ë“œë½ ë°œìƒ ë° ì˜ˆë°© ì½”ë“œ",
                "language": "java",
                "code": "import java.util.concurrent.locks.*;\nimport java.util.concurrent.TimeUnit;\n\npublic class DeadlockSolution {\n    \n    // === ë°ë“œë½ ë°œìƒ ì½”ë“œ ===\n    static class DeadlockExample {\n        private final Object lockA = new Object();\n        private final Object lockB = new Object();\n        \n        public void method1() {\n            synchronized (lockA) {  // A íšë“\n                System.out.println(\"Thread1: lockA íšë“\");\n                try { Thread.sleep(100); } catch (Exception e) {}\n                \n                synchronized (lockB) {  // B ëŒ€ê¸° -> ë°ë“œë½!\n                    System.out.println(\"Thread1: lockB íšë“\");\n                }\n            }\n        }\n        \n        public void method2() {\n            synchronized (lockB) {  // B íšë“\n                System.out.println(\"Thread2: lockB íšë“\");\n                try { Thread.sleep(100); } catch (Exception e) {}\n                \n                synchronized (lockA) {  // A ëŒ€ê¸° -> ë°ë“œë½!\n                    System.out.println(\"Thread2: lockA íšë“\");\n                }\n            }\n        }\n    }\n    \n    // === í•´ê²°1: ìˆœí™˜ ëŒ€ê¸° ì œê±° (Lock Ordering) ===\n    static class LockOrderingSolution {\n        private final Object lockA = new Object();\n        private final Object lockB = new Object();\n        \n        // í•­ìƒ A -> B ìˆœì„œë¡œ íšë“ (ìˆœí™˜ ë¶ˆê°€)\n        public void method1() {\n            synchronized (lockA) {\n                System.out.println(\"Thread1: lockA íšë“\");\n                synchronized (lockB) {\n                    System.out.println(\"Thread1: lockB íšë“\");\n                }\n            }\n        }\n        \n        public void method2() {\n            synchronized (lockA) {  // Bê°€ ì•„ë‹Œ A ë¨¼ì €!\n                System.out.println(\"Thread2: lockA íšë“\");\n                synchronized (lockB) {\n                    System.out.println(\"Thread2: lockB íšë“\");\n                }\n            }\n        }\n    }\n    \n    // === í•´ê²°2: tryLockìœ¼ë¡œ íƒ€ì„ì•„ì›ƒ (ë¹„ì„ ì  ì œê±°) ===\n    static class TryLockSolution {\n        private final Lock lockA = new ReentrantLock();\n        private final Lock lockB = new ReentrantLock();\n        \n        public void method1() {\n            while (true) {\n                try {\n                    if (lockA.tryLock(100, TimeUnit.MILLISECONDS)) {\n                        try {\n                            if (lockB.tryLock(100, TimeUnit.MILLISECONDS)) {\n                                try {\n                                    // ì‘ì—… ìˆ˜í–‰\n                                    System.out.println(\"ì‘ì—… ì™„ë£Œ!\");\n                                    return;\n                                } finally {\n                                    lockB.unlock();\n                                }\n                            }\n                        } finally {\n                            lockA.unlock();\n                        }\n                    }\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                }\n                // ì‹¤íŒ¨ ì‹œ ì ì‹œ ëŒ€ê¸° í›„ ì¬ì‹œë„\n                System.out.println(\"ë½ íšë“ ì‹¤íŒ¨, ì¬ì‹œë„...\");\n                try { Thread.sleep((long)(Math.random() * 100)); } \n                catch (Exception e) {}\n            }\n        }\n    }\n    \n    // === í•´ê²°3: ëª¨ë“  ìì› í•œ ë²ˆì— ìš”ì²­ (ì ìœ  ëŒ€ê¸° ì œê±°) ===\n    static class AllOrNothingSolution {\n        private final Lock lockA = new ReentrantLock();\n        private final Lock lockB = new ReentrantLock();\n        \n        public void doWork() {\n            // ëª¨ë“  ë½ì„ í•œ ë²ˆì— íšë“ ì‹œë„\n            while (true) {\n                lockA.lock();\n                if (lockB.tryLock()) {\n                    try {\n                        // ëª¨ë“  ë½ íšë“ ì„±ê³µ!\n                        System.out.println(\"ëª¨ë“  ìì› íšë“ ì„±ê³µ!\");\n                        return;\n                    } finally {\n                        lockB.unlock();\n                        lockA.unlock();\n                    }\n                } else {\n                    // B íšë“ ì‹¤íŒ¨ -> Aë„ ë°˜ë‚© (ì ìœ  ëŒ€ê¸° ë°©ì§€)\n                    lockA.unlock();\n                    System.out.println(\"ë½B ì‹¤íŒ¨, ëª¨ë‘ ë°˜ë‚© í›„ ì¬ì‹œë„\");\n                }\n            }\n        }\n    }\n}"
            },
            {
                "type": "code",
                "title": "ì€í–‰ì› ì•Œê³ ë¦¬ì¦˜ (íšŒí”¼ ì „ëµ)",
                "language": "java",
                "code": "// === ì€í–‰ì› ì•Œê³ ë¦¬ì¦˜ (Banker's Algorithm) ===\n// ë°ë“œë½ íšŒí”¼: ì•ˆì „ ìƒíƒœì¼ ë•Œë§Œ ìì› í• ë‹¹\n\npublic class BankersAlgorithm {\n    \n    private int[] available;      // í˜„ì¬ ì‚¬ìš© ê°€ëŠ¥í•œ ìì›\n    private int[][] max;          // ê° í”„ë¡œì„¸ìŠ¤ì˜ ìµœëŒ€ ìš”êµ¬ëŸ‰\n    private int[][] allocation;   // í˜„ì¬ í• ë‹¹ëœ ìì›\n    private int[][] need;         // ì¶”ê°€ë¡œ í•„ìš”í•œ ìì› (max - allocation)\n    \n    private int numProcesses;\n    private int numResources;\n    \n    public BankersAlgorithm(int processes, int resources, \n                           int[] available, int[][] max, int[][] allocation) {\n        this.numProcesses = processes;\n        this.numResources = resources;\n        this.available = available.clone();\n        this.max = max.clone();\n        this.allocation = allocation.clone();\n        \n        // need ê³„ì‚°\n        this.need = new int[processes][resources];\n        for (int i = 0; i < processes; i++) {\n            for (int j = 0; j < resources; j++) {\n                need[i][j] = max[i][j] - allocation[i][j];\n            }\n        }\n    }\n    \n    // ì•ˆì „ ìƒíƒœ ê²€ì‚¬ (Safety Algorithm)\n    public boolean isSafeState() {\n        int[] work = available.clone();\n        boolean[] finish = new boolean[numProcesses];\n        \n        // ì•ˆì „ ìˆœì„œì—´ ì°¾ê¸°\n        StringBuilder safeSequence = new StringBuilder();\n        int count = 0;\n        \n        while (count < numProcesses) {\n            boolean found = false;\n            \n            for (int i = 0; i < numProcesses; i++) {\n                if (!finish[i] && canAllocate(need[i], work)) {\n                    // í”„ë¡œì„¸ìŠ¤ i ì™„ë£Œ ê°€ëŠ¥\n                    for (int j = 0; j < numResources; j++) {\n                        work[j] += allocation[i][j]; // ìì› ë°˜ë‚©\n                    }\n                    finish[i] = true;\n                    safeSequence.append(\"P\").append(i).append(\" -> \");\n                    count++;\n                    found = true;\n                }\n            }\n            \n            if (!found) {\n                System.out.println(\"ì•ˆì „ ìƒíƒœ ì•„ë‹˜! ë°ë“œë½ ê°€ëŠ¥\");\n                return false;\n            }\n        }\n        \n        System.out.println(\"ì•ˆì „ ìˆœì„œì—´: \" + safeSequence.toString());\n        return true;\n    }\n    \n    // ìì› ìš”ì²­ ì²˜ë¦¬ (Resource Request Algorithm)\n    public boolean requestResources(int processId, int[] request) {\n        System.out.println(\"P\" + processId + \" ìš”ì²­: \" + arrayToString(request));\n        \n        // 1. ìš”ì²­ì´ í•„ìš”ëŸ‰ ì´í•˜ì¸ì§€ í™•ì¸\n        if (!canAllocate(request, need[processId])) {\n            System.out.println(\"ì˜¤ë¥˜: ìµœëŒ€ ìš”êµ¬ëŸ‰ ì´ˆê³¼\");\n            return false;\n        }\n        \n        // 2. ìš”ì²­ì´ ì‚¬ìš© ê°€ëŠ¥ëŸ‰ ì´í•˜ì¸ì§€ í™•ì¸\n        if (!canAllocate(request, available)) {\n            System.out.println(\"ëŒ€ê¸°: ìì› ë¶€ì¡±\");\n            return false;\n        }\n        \n        // 3. ê°€ìƒ í• ë‹¹ í›„ ì•ˆì „ ìƒíƒœ ê²€ì‚¬\n        // ì„ì‹œë¡œ í• ë‹¹\n        for (int j = 0; j < numResources; j++) {\n            available[j] -= request[j];\n            allocation[processId][j] += request[j];\n            need[processId][j] -= request[j];\n        }\n        \n        if (isSafeState()) {\n            System.out.println(\"ìš”ì²­ ìŠ¹ì¸: ì•ˆì „ ìƒíƒœ ìœ ì§€\");\n            return true;\n        } else {\n            // ë¡¤ë°±\n            for (int j = 0; j < numResources; j++) {\n                available[j] += request[j];\n                allocation[processId][j] -= request[j];\n                need[processId][j] += request[j];\n            }\n            System.out.println(\"ìš”ì²­ ê±°ë¶€: ë°ë“œë½ ìœ„í—˜\");\n            return false;\n        }\n    }\n    \n    private boolean canAllocate(int[] request, int[] available) {\n        for (int i = 0; i < request.length; i++) {\n            if (request[i] > available[i]) return false;\n        }\n        return true;\n    }\n    \n    private String arrayToString(int[] arr) {\n        StringBuilder sb = new StringBuilder(\"[\");\n        for (int i = 0; i < arr.length; i++) {\n            sb.append(arr[i]);\n            if (i < arr.length - 1) sb.append(\", \");\n        }\n        return sb.append(\"]\").toString();\n    }\n    \n    public static void main(String[] args) {\n        // ì˜ˆì‹œ: 3ì¢…ë¥˜ ìì›, 5ê°œ í”„ë¡œì„¸ìŠ¤\n        int[] available = {3, 3, 2};\n        int[][] max = {\n            {7, 5, 3}, // P0\n            {3, 2, 2}, // P1\n            {9, 0, 2}, // P2\n            {2, 2, 2}, // P3\n            {4, 3, 3}  // P4\n        };\n        int[][] allocation = {\n            {0, 1, 0}, // P0\n            {2, 0, 0}, // P1\n            {3, 0, 2}, // P2\n            {2, 1, 1}, // P3\n            {0, 0, 2}  // P4\n        };\n        \n        BankersAlgorithm banker = new BankersAlgorithm(5, 3, available, max, allocation);\n        banker.isSafeState();\n        \n        // P1ì´ (1, 0, 2) ìš”ì²­\n        banker.requestResources(1, new int[]{1, 0, 2});\n    }\n}"
            },
            {
                "type": "tip",
                "title": "ë©´ì ‘ ëŒ€ë¹„ í•µì‹¬ ì •ë¦¬",
                "content": "## ë°ë“œë½ í•´ê²° í•µì‹¬ ìš”ì•½\n\n### ë©´ì ‘ ë‹µë³€ í…œí”Œë¦¿\n```\n\"ë°ë“œë½ì€ ìƒí˜¸ ë°°ì œ, ì ìœ  ëŒ€ê¸°, ë¹„ì„ ì , ìˆœí™˜ ëŒ€ê¸°\në„¤ ê°€ì§€ ì¡°ê±´ì´ ëª¨ë‘ ì¶©ì¡±ë  ë•Œ ë°œìƒí•©ë‹ˆë‹¤.\n\ní•´ê²° ë°©ë²•ì€ ì˜ˆë°©, íšŒí”¼, íƒì§€&íšŒë³µ ì„¸ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.\n\nì˜ˆë°©ì€ ë„¤ ì¡°ê±´ ì¤‘ í•˜ë‚˜ë¥¼ ì œê±°í•˜ëŠ” ë°©ì‹ì´ê³ ,\níšŒí”¼ëŠ” ì€í–‰ì› ì•Œê³ ë¦¬ì¦˜ì²˜ëŸ¼ ì•ˆì „ ìƒíƒœë§Œ í—ˆìš©í•˜ë©°,\níƒì§€&íšŒë³µì€ ë°ë“œë½ ë°œìƒ í›„ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œë¡œ í•´ê²°í•©ë‹ˆë‹¤.\n\nì‹¤ë¬´ì—ì„œëŠ” Lock Ordering(ìˆœí™˜ ëŒ€ê¸° ì œê±°)ì´ë‚˜\ntryLock íƒ€ì„ì•„ì›ƒì„ ì£¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.\"\n```\n\n### í•´ê²° ì „ëµ ë¹„êµí‘œ\n| ì „ëµ | ë°©ë²• | ì¥ì  | ë‹¨ì  |\n|------|------|------|------|\n| ì˜ˆë°© | ì¡°ê±´ ì œê±° | ë°ë“œë½ ì›ì²œ ë´‰ì‡„ | ìì› ë‚­ë¹„ |\n| íšŒí”¼ | ì•ˆì „ ìƒíƒœ ê²€ì‚¬ | ìœ ì—°í•œ í• ë‹¹ | ì˜¤ë²„í—¤ë“œ |\n| íƒì§€&íšŒë³µ | ì£¼ê¸°ì  ê²€ì‚¬ | ìì› íš¨ìœ¨ | ë³µêµ¬ ë¹„ìš© |\n\n### ì‹¤ë¬´ì—ì„œ ìì£¼ ì“°ëŠ” ë°©ë²•\n1. **Lock Ordering**: í•­ìƒ ê°™ì€ ìˆœì„œë¡œ ë½ íšë“\n2. **tryLock + íƒ€ì„ì•„ì›ƒ**: ì¼ì • ì‹œê°„ í›„ í¬ê¸°\n3. **ë‹¨ì¼ ê¸€ë¡œë²Œ ë½**: ëª¨ë“  ìì›ì„ í•˜ë‚˜ì˜ ë½ìœ¼ë¡œ (ê°„ë‹¨í•˜ì§€ë§Œ ë¹„íš¨ìœ¨)\n\n### ìì£¼ ë‚˜ì˜¤ëŠ” ë©´ì ‘ ì§ˆë¬¸\n\n**Q1: ë°ë“œë½ ë°œìƒ ì¡°ê±´ 4ê°€ì§€?**\n- ìƒí˜¸ ë°°ì œ, ì ìœ  ëŒ€ê¸°, ë¹„ì„ ì , ìˆœí™˜ ëŒ€ê¸°\n\n**Q2: ì‹¤ë¬´ì—ì„œ ë°ë“œë½ ì˜ˆë°© ë°©ë²•?**\n- Lock Ordering (ìˆœí™˜ ëŒ€ê¸° ì œê±°)\n- tryLock íƒ€ì„ì•„ì›ƒ (ë¹„ì„ ì  ì œê±°)\n\n**Q3: ì€í–‰ì› ì•Œê³ ë¦¬ì¦˜ì´ë€?**\n- ìì› ìš”ì²­ ì‹œ ì•ˆì „ ìƒíƒœ ê²€ì‚¬\n- ì•ˆì „í•˜ë©´ í• ë‹¹, ì•„ë‹ˆë©´ ê±°ë¶€\n\n**Q4: ë°ë“œë½ vs ë¼ì´ë¸Œë½ ì°¨ì´?**\n- ë°ë“œë½: ì„œë¡œ ëŒ€ê¸°í•˜ë©° ë©ˆì¶¤\n- ë¼ì´ë¸Œë½: ì„œë¡œ ì–‘ë³´í•˜ë©° ì§„í–‰ ëª»í•¨"
            }
        ]
    }

def main():
    """Main function to update os.json with new content."""
    json_path = r"c:\tools\codemaster-next-main\codemaster-next-main\codemaster-next-main\src\data\contents\os.json"

    # Read existing JSON
    with open(json_path, 'r', encoding='utf-8') as f:
        data = json.load(f)

    # Create new content
    new_contents = [
        create_sync_async_content(),
        create_blocking_nonblocking_content(),
        create_sync_blocking_matrix_content(),
        create_critical_section_content(),
        create_mutex_semaphore_content(),
        create_deadlock_solution_content()
    ]

    # Update data
    for content in new_contents:
        topic_id = content["id"]
        data[topic_id] = content
        print(f"Updated: {topic_id}")

    # Write back to JSON
    with open(json_path, 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=2)

    print(f"\nSuccessfully updated {len(new_contents)} topics in os.json")
    print("\nUpdated topics:")
    print("  - 05_ë™ê¸°ë¹„ë™ê¸°/sync-async (ë™ê¸° vs ë¹„ë™ê¸°)")
    print("  - 05_ë™ê¸°ë¹„ë™ê¸°/blocking-nonblocking (ë¸”ë¡œí‚¹ vs ë…¼ë¸”ë¡œí‚¹)")
    print("  - 05_ë™ê¸°ë¹„ë™ê¸°/sync-blocking-matrix (4ê°€ì§€ ì¡°í•© ë§¤íŠ¸ë¦­ìŠ¤)")
    print("  - 05_ë™ê¸°í™”/critical-section (ì„ê³„ ì˜ì—­)")
    print("  - 05_ë™ê¸°í™”/mutex-semaphore (ë®¤í…ìŠ¤ vs ì„¸ë§ˆí¬ì–´)")
    print("  - 05_ë™ê¸°í™”/deadlock-solution (ë°ë“œë½ í•´ê²° ë°©ë²•)")

if __name__ == "__main__":
    main()
